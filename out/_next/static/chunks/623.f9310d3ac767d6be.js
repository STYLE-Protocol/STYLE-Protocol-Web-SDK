(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{9e3:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(7462),i=n(9477),a=n(7294);let s=a.forwardRef(function({children:e,left:t,right:n,top:s,bottom:o,front:u,back:c,onCentered:l,precise:f=!0,...h},p){let d=a.useRef(null),g=a.useRef(null),m=a.useRef(null);return a.useLayoutEffect(()=>{g.current.matrixWorld.identity();let e=new i.Box3().setFromObject(m.current,f),r=new i.Vector3,a=new i.Sphere,h=e.max.x-e.min.x,p=e.max.y-e.min.y,y=e.max.z-e.min.z;e.getCenter(r),e.getBoundingSphere(a);let b=s?p/2:o?-p/2:0,v=t?-h/2:n?h/2:0,_=u?y/2:c?-y/2:0;g.current.position.set(-r.x+v,-r.y+b,-r.z+_),void 0!==l&&l({parent:d.current.parent,container:d.current,width:h,height:p,depth:y,boundingBox:e,boundingSphere:a,center:r,verticalAlignment:b,horizontalAlignment:v,depthAlignment:_})},[e]),a.useImperativeHandle(p,()=>d.current,[]),a.createElement("group",(0,r.Z)({ref:d},h),a.createElement("group",{ref:g},a.createElement("group",{ref:m},e)))})},6665:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(7462),i=n(7765),a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(9477);let u=(e,t)=>(e%t+t)%t;class c extends o.EventDispatcher{constructor(e,t){super(),s(this,"object",void 0),s(this,"domElement",void 0),s(this,"enabled",!0),s(this,"target",new o.Vector3),s(this,"minDistance",0),s(this,"maxDistance",1/0),s(this,"minZoom",0),s(this,"maxZoom",1/0),s(this,"minPolarAngle",0),s(this,"maxPolarAngle",Math.PI),s(this,"minAzimuthAngle",-1/0),s(this,"maxAzimuthAngle",1/0),s(this,"enableDamping",!1),s(this,"dampingFactor",.05),s(this,"enableZoom",!0),s(this,"zoomSpeed",1),s(this,"enableRotate",!0),s(this,"rotateSpeed",1),s(this,"enablePan",!0),s(this,"panSpeed",1),s(this,"screenSpacePanning",!0),s(this,"keyPanSpeed",7),s(this,"autoRotate",!1),s(this,"autoRotateSpeed",2),s(this,"reverseOrbit",!1),s(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),s(this,"mouseButtons",{LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN}),s(this,"touches",{ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN}),s(this,"target0",void 0),s(this,"position0",void 0),s(this,"zoom0",void 0),s(this,"_domElementKeyEvents",null),s(this,"getPolarAngle",void 0),s(this,"getAzimuthalAngle",void 0),s(this,"setPolarAngle",void 0),s(this,"setAzimuthalAngle",void 0),s(this,"getDistance",void 0),s(this,"listenToKeyEvents",void 0),s(this,"saveState",void 0),s(this,"reset",void 0),s(this,"update",void 0),s(this,"connect",void 0),s(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof o.PerspectiveCamera?this.object.zoom:1,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=e=>{let t=u(e,2*Math.PI),r=h.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),p.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=u(e,2*Math.PI),r=h.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),p.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",Y),this._domElementKeyEvents=e},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object instanceof o.PerspectiveCamera?n.object.zoom:1},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object instanceof o.PerspectiveCamera&&(n.object.zoom=n.zoom0,n.object.updateProjectionMatrix()),n.dispatchEvent(r),n.update(),l=c.NONE},this.update=(()=>{let t=new o.Vector3,i=new o.Quaternion().setFromUnitVectors(e.up,new o.Vector3(0,1,0)),a=i.clone().invert(),s=new o.Vector3,u=new o.Quaternion,y=2*Math.PI;return function(){let e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),h.setFromVector3(t),n.autoRotate&&l===c.NONE&&R(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(h.theta+=p.theta*n.dampingFactor,h.phi+=p.phi*n.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let o=n.minAzimuthAngle,b=n.maxAzimuthAngle;return isFinite(o)&&isFinite(b)&&(o<-Math.PI?o+=y:o>Math.PI&&(o-=y),b<-Math.PI?b+=y:b>Math.PI&&(b-=y),o<=b?h.theta=Math.max(o,Math.min(b,h.theta)):h.theta=h.theta>(o+b)/2?Math.max(o,h.theta):Math.min(b,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),!0===n.enableDamping?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),t.setFromSpherical(h),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),g.set(0,0,0)),d=1,!!(m||s.distanceToSquared(n.object.position)>f||8*(1-u.dot(n.object.quaternion))>f)&&(n.dispatchEvent(r),s.copy(n.object.position),u.copy(n.object.quaternion),m=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",X),n.domElement.addEventListener("pointerdown",Z),n.domElement.addEventListener("pointercancel",K),n.domElement.addEventListener("wheel",W)},this.dispose=()=>{var e,t,r,i,a,s;null===(e=n.domElement)||void 0===e||e.removeEventListener("contextmenu",X),null===(t=n.domElement)||void 0===t||t.removeEventListener("pointerdown",Z),null===(r=n.domElement)||void 0===r||r.removeEventListener("pointercancel",K),null===(i=n.domElement)||void 0===i||i.removeEventListener("wheel",W),null===(a=n.domElement)||void 0===a||a.ownerDocument.removeEventListener("pointermove",z),null===(s=n.domElement)||void 0===s||s.ownerDocument.removeEventListener("pointerup",q),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Y)};let n=this,r={type:"change"},i={type:"start"},a={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=c.NONE,f=1e-6,h=new o.Spherical,p=new o.Spherical,d=1,g=new o.Vector3,m=!1,y=new o.Vector2,b=new o.Vector2,v=new o.Vector2,_=new o.Vector2,T=new o.Vector2,x=new o.Vector2,E=new o.Vector2,A=new o.Vector2,w=new o.Vector2,M=[],S={};function I(){return Math.pow(.95,n.zoomSpeed)}function R(e){n.reverseOrbit?p.theta+=e:p.theta-=e}function L(e){n.reverseOrbit?p.phi+=e:p.phi-=e}let N=(()=>{let e=new o.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),g.add(e)}})(),O=(()=>{let e=new o.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),g.add(e)}})(),j=(()=>{let e=new o.Vector3;return function(t,r){let i=n.domElement;if(i&&n.object instanceof o.PerspectiveCamera&&n.object.isPerspectiveCamera){let a=n.object.position;e.copy(a).sub(n.target);let s=e.length();N(2*t*(s*=Math.tan(n.object.fov/2*Math.PI/180))/i.clientHeight,n.object.matrix),O(2*r*s/i.clientHeight,n.object.matrix)}else i&&n.object instanceof o.OrthographicCamera&&n.object.isOrthographicCamera?(N(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),O(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function P(e){n.object instanceof o.PerspectiveCamera&&n.object.isPerspectiveCamera?d/=e:n.object instanceof o.OrthographicCamera&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object instanceof o.PerspectiveCamera&&n.object.isPerspectiveCamera?d*=e:n.object instanceof o.OrthographicCamera&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function C(e){y.set(e.clientX,e.clientY)}function U(e){_.set(e.clientX,e.clientY)}function F(){if(1==M.length)y.set(M[0].pageX,M[0].pageY);else{let e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);y.set(e,t)}}function D(){if(1==M.length)_.set(M[0].pageX,M[0].pageY);else{let e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);_.set(e,t)}}function V(){let e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY;E.set(0,Math.sqrt(e*e+t*t))}function B(e){if(1==M.length)b.set(e.pageX,e.pageY);else{let t=$(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);b.set(r,i)}v.subVectors(b,y).multiplyScalar(n.rotateSpeed);let a=n.domElement;a&&(R(2*Math.PI*v.x/a.clientHeight),L(2*Math.PI*v.y/a.clientHeight)),y.copy(b)}function G(e){if(1==M.length)T.set(e.pageX,e.pageY);else{let t=$(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);T.set(r,i)}x.subVectors(T,_).multiplyScalar(n.panSpeed),j(x.x,x.y),_.copy(T)}function H(e){let t=$(e),r=e.pageX-t.x,i=e.pageY-t.y;A.set(0,Math.sqrt(r*r+i*i)),w.set(0,Math.pow(A.y/E.y,n.zoomSpeed)),P(w.y),E.copy(A)}function Z(e){if(!1!==n.enabled){var t,r,a;if(0===M.length){null===(t=n.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",z),null===(r=n.domElement)||void 0===r||r.ownerDocument.addEventListener("pointerup",q)}a=e,M.push(a),"touch"===e.pointerType?function(e){switch(Q(e),M.length){case 1:switch(n.touches.ONE){case o.TOUCH.ROTATE:if(!1===n.enableRotate)return;F(),l=c.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(!1===n.enablePan)return;D(),l=c.TOUCH_PAN;break;default:l=c.NONE}break;case 2:switch(n.touches.TWO){case o.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&V(),n.enablePan&&D(),l=c.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&V(),n.enableRotate&&F(),l=c.TOUCH_DOLLY_ROTATE;break;default:l=c.NONE}break;default:l=c.NONE}l!==c.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o.MOUSE.DOLLY:var r;if(!1===n.enableZoom)return;E.set(e.clientX,e.clientY),l=c.DOLLY;break;case o.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;U(e),l=c.PAN}else{if(!1===n.enableRotate)return;C(e),l=c.ROTATE}break;case o.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;C(e),l=c.ROTATE}else{if(!1===n.enablePan)return;U(e),l=c.PAN}break;default:l=c.NONE}l!==c.NONE&&n.dispatchEvent(i)}(e)}}function z(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){var t,r;switch(Q(e),l){case c.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(e),n.update();break;case c.TOUCH_PAN:if(!1===n.enablePan)return;G(e),n.update();break;case c.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&H(e),n.enablePan&&G(e),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&H(e),n.enableRotate&&B(e),n.update();break;default:l=c.NONE}}(e):function(e){var t,r;if(!1!==n.enabled)switch(l){case c.ROTATE:if(!1===n.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),v.subVectors(b,y).multiplyScalar(n.rotateSpeed);let t=n.domElement;t&&(R(2*Math.PI*v.x/t.clientHeight),L(2*Math.PI*v.y/t.clientHeight)),y.copy(b),n.update()}(e);break;case c.DOLLY:if(!1===n.enableZoom)return;A.set(e.clientX,e.clientY),w.subVectors(A,E),w.y>0?P(I()):w.y<0&&k(I()),E.copy(A),n.update();break;case c.PAN:if(!1===n.enablePan)return;T.set(e.clientX,e.clientY),x.subVectors(T,_).multiplyScalar(n.panSpeed),j(x.x,x.y),_.copy(T),n.update()}}(e))}function q(e){if(J(e),0===M.length){var t,r,i;null===(t=n.domElement)||void 0===t||t.releasePointerCapture(e.pointerId),null===(r=n.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointermove",z),null===(i=n.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerup",q)}n.dispatchEvent(a),l=c.NONE}function K(e){J(e)}function W(e){var t;!1!==n.enabled&&!1!==n.enableZoom&&(l===c.NONE||l===c.ROTATE)&&(e.preventDefault(),n.dispatchEvent(i),e.deltaY<0?k(I()):e.deltaY>0&&P(I()),n.update(),n.dispatchEvent(a))}function Y(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:j(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:j(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:j(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:j(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function X(e){!1!==n.enabled&&e.preventDefault()}function J(e){delete S[e.pointerId];for(let t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId){M.splice(t,1);return}}function Q(e){let t=S[e.pointerId];void 0===t&&(t=new o.Vector2,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){let t=e.pointerId===M[0].pointerId?M[1]:M[0];return S[t.pointerId]}void 0!==t&&this.connect(t),this.update()}}let l=a.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:s,enableDamping:o=!0,onChange:u,onStart:l,onEnd:f,...h},p)=>{let d=(0,i.y)(e=>e.invalidate),g=(0,i.y)(e=>e.camera),m=(0,i.y)(e=>e.gl),y=(0,i.y)(e=>e.events),b=(0,i.y)(e=>e.set),v=(0,i.y)(e=>e.get),_=(0,i.y)(e=>e.performance),T=t||g,x=s||y.connected||m.domElement,E=a.useMemo(()=>new c(T),[T]);return(0,i.z)(()=>{E.enabled&&E.update()},-1),a.useEffect(()=>(E.connect(x),()=>void E.dispose()),[x,n,E,d]),a.useEffect(()=>{let e=e=>{d(),n&&_.regress(),u&&u(e)};return E.addEventListener("change",e),l&&E.addEventListener("start",l),f&&E.addEventListener("end",f),()=>{l&&E.removeEventListener("start",l),f&&E.removeEventListener("end",f),E.removeEventListener("change",e)}},[u,l,f,E,d]),a.useEffect(()=>{if(e){let t=v().controls;return b({controls:E}),()=>b({controls:t})}},[e,E]),a.createElement("primitive",(0,r.Z)({ref:p,object:E,enableDamping:o},h))})},6239:function(e,t,n){"use strict";var r=n(5081);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(e){var t=new i;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var a=0;a<n.length;++a){var s=n[a];if("array"===s||"object"==typeof s&&s.blockIndices){if(t.argTypes[a]="array",t.arrayArgs.push(a),t.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),t.shimArgs.push("array"+a),a<t.pre.args.length&&t.pre.args[a].count>0)throw Error("cwise: pre() block may not reference array args");if(a<t.post.args.length&&t.post.args[a].count>0)throw Error("cwise: post() block may not reference array args")}else if("scalar"===s)t.scalarArgs.push(a),t.shimArgs.push("scalar"+a);else if("index"===s){if(t.indexArgs.push(a),a<t.pre.args.length&&t.pre.args[a].count>0)throw Error("cwise: pre() block may not reference array index");if(a<t.body.args.length&&t.body.args[a].lvalue)throw Error("cwise: body() block may not write to array index");if(a<t.post.args.length&&t.post.args[a].count>0)throw Error("cwise: post() block may not reference array index")}else if("shape"===s){if(t.shapeArgs.push(a),a<t.pre.args.length&&t.pre.args[a].lvalue)throw Error("cwise: pre() block may not write to array shape");if(a<t.body.args.length&&t.body.args[a].lvalue)throw Error("cwise: body() block may not write to array shape");if(a<t.post.args.length&&t.post.args[a].lvalue)throw Error("cwise: post() block may not write to array shape")}else if("object"==typeof s&&s.offset)t.argTypes[a]="offset",t.offsetArgs.push({array:s.array,offset:s.offset}),t.offsetArgIndex.push(a);else throw Error("cwise: Unknown argument type "+n[a])}if(t.arrayArgs.length<=0)throw Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},1984:function(e,t,n){"use strict";var r=n(8706);function i(e,t,n){var r,i,a=e.length,s=t.arrayArgs.length,o=t.indexArgs.length>0,u=[],c=[],l=0,f=0;for(r=0;r<a;++r)c.push(["i",r,"=0"].join(""));for(i=0;i<s;++i)for(r=0;r<a;++r)f=l,l=e[r],0===r?c.push(["d",i,"s",r,"=t",i,"p",l].join("")):c.push(["d",i,"s",r,"=(t",i,"p",l,"-s",f,"*t",i,"p",f,")"].join(""));for(c.length>0&&u.push("var "+c.join(",")),r=a-1;r>=0;--r)l=e[r],u.push(["for(i",r,"=0;i",r,"<s",l,";++i",r,"){"].join(""));for(u.push(n),r=0;r<a;++r){for(i=0,f=l,l=e[r];i<s;++i)u.push(["p",i,"+=d",i,"s",r].join(""));o&&(r>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",l,"]"].join(""))),u.push("}")}return u.join("\n")}function a(e,t,n){for(var r=e.body,i=[],a=[],s=0;s<e.args.length;++s){var o=e.args[s];if(!(o.count<=0)){var u=RegExp(o.name,"g"),c="",l=t.arrayArgs.indexOf(s);switch(t.argTypes[s]){case"offset":var f=t.offsetArgIndex.indexOf(s);l=t.offsetArgs[f].array,c="+q"+f;case"array":c="p"+l+c;var h="l"+s,p="a"+l;if(0===t.arrayBlockIndices[l])1===o.count?"generic"===n[l]?o.lvalue?(i.push(["var ",h,"=",p,".get(",c,")"].join("")),r=r.replace(u,h),a.push([p,".set(",c,",",h,")"].join(""))):r=r.replace(u,[p,".get(",c,")"].join("")):r=r.replace(u,[p,"[",c,"]"].join("")):"generic"===n[l]?(i.push(["var ",h,"=",p,".get(",c,")"].join("")),r=r.replace(u,h),o.lvalue&&a.push([p,".set(",c,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",c,"]"].join("")),r=r.replace(u,h),o.lvalue&&a.push([p,"[",c,"]=",h].join("")));else{for(var d=[o.name],g=[c],m=0;m<Math.abs(t.arrayBlockIndices[l]);m++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(m+1)+"*t"+l+"b"+m);if(u=RegExp(d.join(""),"g"),c=g.join("+"),"generic"===n[l])throw Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(u,[p,"[",c,"]"].join(""))}break;case"scalar":r=r.replace(u,"Y"+t.scalarArgs.indexOf(s));break;case"index":r=r.replace(u,"index");break;case"shape":r=r.replace(u,"shape")}}}return[i.join("\n"),r,a.join("\n")].join("\n").trim()}e.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=Array(e.arrayArgs.length),o=Array(e.arrayArgs.length),u=0;u<e.arrayArgs.length;++u)o[u]=t[2*u],s[u]=t[2*u+1];for(var c=[],l=[],f=[],h=[],p=[],u=0;u<e.arrayArgs.length;++u){e.arrayBlockIndices[u]<0?(f.push(0),h.push(n),c.push(n),l.push(n+e.arrayBlockIndices[u])):(f.push(e.arrayBlockIndices[u]),h.push(e.arrayBlockIndices[u]+n),c.push(0),l.push(e.arrayBlockIndices[u]));for(var d=[],g=0;g<s[u].length;g++)f[u]<=s[u][g]&&s[u][g]<h[u]&&d.push(s[u][g]-f[u]);p.push(d)}for(var m=["SS"],y=["'use strict'"],b=[],g=0;g<n;++g)b.push(["s",g,"=SS[",g,"]"].join(""));for(var u=0;u<e.arrayArgs.length;++u){m.push("a"+u),m.push("t"+u),m.push("p"+u);for(var g=0;g<n;++g)b.push(["t",u,"p",g,"=t",u,"[",f[u]+g,"]"].join(""));for(var g=0;g<Math.abs(e.arrayBlockIndices[u]);++g)b.push(["t",u,"b",g,"=t",u,"[",c[u]+g,"]"].join(""))}for(var u=0;u<e.scalarArgs.length;++u)m.push("Y"+u);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var v=Array(n),u=0;u<n;++u)v[u]="0";b.push(["index=[",v.join(","),"]"].join(""))}for(var u=0;u<e.offsetArgs.length;++u){for(var _=e.offsetArgs[u],T=[],g=0;g<_.offset.length;++g)0!==_.offset[g]&&(1===_.offset[g]?T.push(["t",_.array,"p",g].join("")):T.push([_.offset[g],"*t",_.array,"p",g].join("")));0===T.length?b.push("q"+u+"=0"):b.push(["q",u,"=",T.join("+")].join(""))}var x=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));(b=b.concat(x)).length>0&&y.push("var "+b.join(","));for(var u=0;u<e.arrayArgs.length;++u)y.push("p"+u+"|=0");e.pre.body.length>3&&y.push(a(e.pre,e,o));var E=a(e.body,e,o),A=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(p);A<n?y.push(function(e,t,n,r){for(var a=t.length,s=n.arrayArgs.length,o=n.blockSize,u=n.indexArgs.length>0,c=[],l=0;l<s;++l)c.push(["var offset",l,"=p",l].join(""));for(var l=e;l<a;++l)c.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",o,"){"].join("")),c.push(["s",t[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",t[l],"=",o].join("")),c.push(["j",l,"-=",o,"}"].join("")),u&&c.push(["index[",t[l],"]=j",l].join(""));for(var l=0;l<s;++l){for(var f=["offset"+l],h=e;h<a;++h)f.push(["j",h,"*t",l,"p",t[h]].join(""));c.push(["p",l,"=(",f.join("+"),")"].join(""))}c.push(i(t,n,r));for(var l=e;l<a;++l)c.push("}");return c.join("\n")}(A,p[0],e,E)):y.push(i(p[0],e,E)),e.post.body.length>3&&y.push(a(e.post,e,o)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------");var w=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",A,function(e){for(var t=Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+a:t[r]=i.charAt(0)+a,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}(o)].join("");return Function(["function ",w,"(",m.join(","),"){",y.join("\n"),"} return ",w].join(""))()}},5081:function(e,t,n){"use strict";var r=n(1984);e.exports=function(e){var t,n=["'use strict'","var CACHED={}"],i=[];n.push(["return function ",e.funcName+"_cwise_thunk","(",e.shimArgs.join(","),"){"].join(""));for(var a=[],s=[],o=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],c=[],l=0;l<e.arrayArgs.length;++l){var f=e.arrayArgs[l];i.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),a.push("t"+f),a.push("r"+f),s.push("t"+f),s.push("r"+f+".join()"),o.push("array"+f+".data"),o.push("array"+f+".stride"),o.push("array"+f+".offset|0"),l>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),c.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}e.arrayArgs.length>1&&(n.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),n.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),n.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),n.push("}"));for(var l=0;l<e.scalarArgs.length;++l)o.push("scalar"+e.scalarArgs[l]);return i.push(["type=[",s.join(","),"].join()"].join("")),i.push("proc=CACHED[type]"),n.push("var "+i.join(",")),n.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",o.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+n.join("\n")+"\n----------"),Function("compile",n.join("\n"))(r.bind(void 0,e))}},5822:function(e,t,n){var r=n(6994);function i(e,t){var n,i=Math.max(1,s(Math.abs(e))),o=s(Math.abs(i)),u=Math.pow(10,t+1);if(1>Math.abs(e))e=Math.round(e*u)/u;else{var c=Math.pow(10,i+1);e=Math.round(e/c*u)/u*c}if(t-o-6==-1)e=Math.round(e/Math.pow(10,i)),e*=Math.pow(10,i),n=r("%1e",e).replace(/\.[^e]+/,"");else{if(t-o-6<0)return;n=r("%."+(t-o-6)+"e",e)}return e>0&&(n=" "+n),a(n,t)}function a(e,t){return Array(Math.max(0,t-e.length+1)).join(" ")+e}function s(e){return Math.floor(Math.log(e)/Math.log(10))}e.exports=function(e,t){void 0===t&&(t=8);var n="%"+t+"."+t+"s";if(!(t<=0)){if(isNaN(e))return r(n,"NaN");if(e===1/0){if(1===t)return;return r(n,t>=9?"Infinity":" Inf").slice(0,t)}if(e===-1/0){if(1===t)return;return r(n,t>=9?"-Infinity":"-Inf").slice(0,t)}return function(e,t){var n=Math.max(1,Math.floor((t-2)/2)),o=t-n-2;if(0===e&&t<4)return a("0",t);if(0===e)return a("0."+Array(o+1).join("0"),t);if(o<=0){var u=r("%"+n+"f",e);if(e>=0&&(u=" "+u),u.length>t)return;return a(u,t)}if(Math.abs(e)<Math.pow(10,1-o))return i(e,t);var c=Math.pow(10,t-3),l=Math.pow(10,s(Math.abs(e))),f=Math.round(e/l*c)/c*l,u=r("%"+n+"."+o+"f",f);f>0&&(u=" "+u);var h=(u=u.slice(0,t)).split(".")[1];return!h||h.length<1?i(f,t):a(u,t).slice(0,t)}(e,t)}}},6907:function(e){"use strict";e.exports=function(e){for(var t=Array(e),n=0;n<e;++n)t[n]=n;return t}},8738:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ e.exports=function(e){var n;return null!=e&&(t(e)||(n=e,"function"==typeof n.readFloatLE&&"function"==typeof n.slice&&t(n.slice(0,0)))||!!e._isBuffer)}},2279:function(e){"use strict";function t(e,t){return e.b===t.b&&e.a===t.a}function n(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function r(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?r<i?t.a-e.a+r/(r+i)*(e.a-n.a):t.a-n.a+i/(r+i)*(n.a-e.a):0}function i(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?(t.a-n.a)*r+(t.a-e.a)*i:0}function a(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function s(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?r<i?t.b-e.b+r/(r+i)*(e.b-n.b):t.b-n.b+i/(r+i)*(n.b-e.b):0}function o(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?(t.b-n.b)*r+(t.b-e.b)*i:0}function u(e){return n(e.b.a,e.a)}function c(e){return n(e.a,e.b.a)}function l(e,t,n,r){return(e=0>e?0:e)<=(n=0>n?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function f(e){var t=m(e.b);return b(t,e.c),b(t.b,e.c),v(t,e.a),t}function h(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,T(t.a,e.a)),t.d!==e.d&&(n=!0,x(t.d,e.d)),y(t,e),r||(b(t,e.a),e.a.c=e),n||(v(t,e.d),e.d.a=e))}function p(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,x(e.d,e.b.d)),e.c===e?T(e.a,null):(e.b.d.a=$(e),e.a.c=e.c,y(e,$(e)),n||v(e,e.d)),t.c===t?(T(t.a,null),x(t.d,null)):(e.d.a=$(t),t.a.c=t.c,y(t,$(t))),_(e)}function d(e){var t=m(e),n=t.b;return y(t,e.e),t.a=e.b.a,b(n,t.a),t.d=n.d=e.d,t=t.b,y(e.b,$(e.b)),y(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function g(e,t){var n=!1,r=m(e),i=r.b;return t.d!==e.d&&(n=!0,x(t.d,e.d)),y(r,e.e),y(i,t),r.a=e.b.a,i.a=t.a,r.d=i.d=e.d,e.d.a=i,n||v(r,e.d),r}function m(e){var t=new Q,n=new Q,r=e.b.h;return n.h=r,r.b.h=t,t.h=e,e.b.h=n,t.b=n,t.c=t,t.e=n,n.b=t,n.c=n,n.e=t}function y(e,t){var n=e.c,r=t.c;n.b.e=t,r.b.e=e,e.c=r,t.c=n}function b(e,t){var n=t.f,r=new et(t,n);n.e=r,t.f=r,n=r.c=e;do n.a=r,n=n.c;while(n!==e)}function v(e,t){var n=t.d,r=new J(t,n);n.b=r,t.d=r,r.a=e,r.c=t.c,n=e;do n.d=r,n=n.e;while(n!==e)}function _(e){var t=e.h;e=e.b.h,t.b.h=e,e.b.h=t}function T(e,t){var n=e.c,r=n;do r.a=t,r=r.c;while(r!==n);n=e.f,(r=e.e).f=n,n.e=r}function x(e,t){var n=e.a,r=n;do r.d=t,r=r.e;while(r!==n);n=e.d,(r=e.b).d=n,n.b=r}function E(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}var A,w=4*1e150;function M(e,t){e.f+=t.f,e.b.f+=t.b.f}function S(e,t,a){return(e=e.a,t=t.a,a=a.a,t.b.a===e)?a.b.a===e?n(t.a,a.a)?0>=i(a.b.a,t.a,a.a):0<=i(t.b.a,a.a,t.a):0>=i(a.b.a,e,a.a):a.b.a===e?0<=i(t.b.a,e,t.a):(t=r(t.b.a,e,t.a))>=(e=r(a.b.a,e,a.a))}function I(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function R(e,t){p(e.a),e.c=!1,e.a=t,t.i=e}function L(e){var t=e.a.a;do e=ep(e);while(e.a.a===t);return e.c&&(t=g(eh(e).a.b,e.a.e),R(e,t),e=ep(e)),e}function N(e,t,n){var r=new ef;return r.a=n,r.e=z(e.f,t.e,r),n.i=r}function O(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return 0>t;case 100134:return 2<=t||-2>=t}return!1}function j(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,I(e)}function P(e,t,n){for(e=t,t=t.a;e!==n;){e.c=!1;var r=eh(e),i=r.a;if(i.a!==t.a){if(!r.c){j(e);break}R(r,i=g(t.c.b,i.b))}t.c!==i&&(h($(i),i),h(t,i)),j(e),t=r.a,e=r}return t}function k(e,t,n,r,i,a){var s=!0;do N(e,t,n.b),n=n.c;while(n!==r);for(null===i&&(i=eh(t).a.b.c);(n=(r=eh(t)).a.b).a===i.a;)n.c!==i&&(h($(n),n),h($(i),n)),r.f=t.f-n.f,r.d=O(e,r.f),t.b=!0,!s&&D(e,t)&&(M(n,i),I(t),p(i)),s=!1,t=r,i=n;t.b=!0,a&&B(e,t)}function C(e,t,n,r,i){var a=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(a,n,r,e.c)||null,null===t.d&&(i?e.n||(X(e,100156),e.n=!0):t.d=n[0])}function U(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,C(e,t.a,r,[.5,.5,0,0],!1),h(t,n)}function F(e,t,n,r,i){var a=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),s=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),o=i+1;r[i]=.5*s/(a+s),r[o]=.5*a/(a+s),e.g[0]+=r[i]*t.g[0]+r[o]*n.g[0],e.g[1]+=r[i]*t.g[1]+r[o]*n.g[1],e.g[2]+=r[i]*t.g[2]+r[o]*n.g[2]}function D(e,r){var a=eh(r),s=r.a,o=a.a;if(n(s.a,o.a)){if(0<i(o.b.a,s.a,o.a))return!1;if(t(s.a,o.a)){if(s.a!==o.a){var a=e.e,u=s.a.h;if(0<=u){var a=a.b,c=a.d,l=a.e,f=a.c,p=f[u];c[p]=c[a.a],f[c[p]]=p,p<=--a.a&&(1>=p?ec(a,p):n(l[c[p>>1]],l[c[p]])?ec(a,p):el(a,p)),l[u]=null,f[u]=a.b,a.b=u}else for(a.c[-(u+1)]=null;0<a.a&&null===a.c[a.d[a.a-1]];)--a.a;U(e,$(o),s)}}else d(o.b),h(s,$(o)),r.b=a.b=!0}else{if(0>i(s.b.a,o.a,s.a))return!1;ep(r).b=r.b=!0,d(s.b),h($(o),s)}return!0}function V(e,u){var c=eh(u),f=u.a,p=c.a,g=f.a,m=p.a,y=f.b.a,b=p.b.a,v=new et;if(i(y,e.a,g),i(b,e.a,m),g===m||Math.min(g.a,y.a)>Math.max(m.a,b.a))return!1;if(n(g,m)){if(0<i(b,g,m))return!1}else if(0>i(y,m,g))return!1;var _,T,x=y,E=g,A=b,w=m;if(n(x,E)||(_=x,x=E,E=_),n(A,w)||(_=A,A=w,w=_),n(x,A)||(_=x,x=A,A=_,_=E,E=w,w=_),n(A,E)?n(E,w)?(0>(_=r(x,A,E))+(T=r(A,E,w))&&(_=-_,T=-T),v.b=l(_,A.b,T,E.b)):(0>(_=i(x,A,E))+(T=-i(x,w,E))&&(_=-_,T=-T),v.b=l(_,A.b,T,w.b)):v.b=(A.b+E.b)/2,a(x,E)||(_=x,x=E,E=_),a(A,w)||(_=A,A=w,w=_),a(x,A)||(_=x,x=A,A=_,_=E,E=w,w=_),a(A,E)?a(E,w)?(0>(_=s(x,A,E))+(T=s(A,E,w))&&(_=-_,T=-T),v.a=l(_,A.a,T,E.a)):(0>(_=o(x,A,E))+(T=-o(x,w,E))&&(_=-_,T=-T),v.a=l(_,A.a,T,w.a)):v.a=(A.a+E.a)/2,n(v,e.a)&&(v.b=e.a.b,v.a=e.a.a),x=n(g,m)?g:m,n(x,v)&&(v.b=x.b,v.a=x.a),t(v,g)||t(v,m))return D(e,u),!1;if(!t(y,e.a)&&0<=i(y,e.a,v)||!t(b,e.a)&&0>=i(b,e.a,v)){if(b===e.a)return d(f.b),h(p.b,f),u=L(u),f=eh(u).a,P(e,eh(u),c),k(e,u,$(f),f,f,!0),!0;if(y===e.a){d(p.b),h(f.e,$(p)),m=(g=c=u).a.b.a;do g=ep(g);while(g.a.b.a===m);return g=eh(u=g).a.b.c,c.a=$(p),p=P(e,c,null),k(e,u,p.c,f.b.c,g,!0),!0}return 0<=i(y,e.a,v)&&(ep(u).b=u.b=!0,d(f.b),f.a.b=e.a.b,f.a.a=e.a.a),0>=i(b,e.a,v)&&(u.b=c.b=!0,d(p.b),p.a.b=e.a.b,p.a.a=e.a.a),!1}return d(f.b),d(p.b),h($(p),f),f.a.b=v.b,f.a.a=v.a,f.a.h=er(e.e,f.a),f=f.a,p=[0,0,0,0],v=[g.d,y.d,m.d,b.d],f.g[0]=f.g[1]=f.g[2]=0,F(f,g,y,p,0),F(f,m,b,p,2),C(e,f,v,p,!0),ep(u).b=u.b=c.b=!0,!1}function B(e,t){for(var r=eh(t);;){for(;r.b;)t=r,r=eh(r);if(!t.b&&(r=t,null===(t=ep(t))||!t.b))break;t.b=!1;var a,s=t.a,o=r.a;if(a=s.b.a!==o.b.a)a:{a=t;var u=eh(a),c=a.a,l=u.a,f=void 0;if(n(c.b.a,l.b.a)){if(0>i(c.b.a,l.b.a,c.a)){a=!1;break a}ep(a).b=a.b=!0,f=d(c),h(l.b,f),f.d.c=a.d}else{if(0<i(l.b.a,c.b.a,l.a)){a=!1;break a}a.b=u.b=!0,f=d(l),h(c.e,l.b),f.b.d.c=a.d}a=!0}if(a&&(r.c?(I(r),p(o),o=(r=eh(t)).a):t.c&&(I(t),p(s),s=(t=ep(r)).a)),s.a!==o.a){if(s.b.a===o.b.a||t.c||r.c||s.b.a!==e.a&&o.b.a!==e.a)D(e,t);else if(V(e,t))break}s.a===o.a&&s.b.a===o.b.a&&(M(o,s),I(t),p(s),t=ep(r))}}function G(e,r){e.a=r;for(var a=r.c;null===a.i;)if((a=a.c)===r.c){var a=e,s=r,o=new ef;o.a=s.c.b;var u=a.f,c=u.a;do c=c.a;while(null!==c.b&&!u.c(u.b,o,c.b));var u=c.b,l=eh(u),o=u.a,c=l.a;if(0===i(o.b.a,s,o.a))t((o=u.a).a,s)||t(o.b.a,s)||(d(o.b),u.c&&(p(o.c),u.c=!1),h(s.c,o),G(a,s));else{var f=n(c.b.a,o.b.a)?u:l,l=void 0;u.d||f.c?(l=f===u?g(s.c.b,o.e):g(c.b.c.b,s.c).b,f.c?R(f,l):(o=a,(u=N(a,u,l)).f=ep(u).f+u.a.f,u.d=O(o,u.f)),G(a,s)):k(a,u,s.c,s.c,null,!0)}return}if(a=L(a.i),u=(o=eh(a)).a,(o=P(e,o,null)).c===u){var u=o,o=u.c,c=eh(a),l=a.a,f=c.a,m=!1;l.b.a!==f.b.a&&V(e,a),t(l.a,e.a)&&(h($(o),l),a=L(a),o=eh(a).a,P(e,eh(a),c),m=!0),t(f.a,e.a)&&(h(u,$(f)),u=P(e,c,null),m=!0),m?k(e,a,u.c,o,o,!0):(s=n(f.a,l.a)?$(f):l,k(e,a,s=g(u.c.b,s),s.c,s.c,!1),s.b.i.c=!0,B(e,a))}else k(e,a,o.c,u,u,!0)}function H(e,t){var n=new ef,r=f(e.b);r.a.b=w,r.a.a=t,r.b.a.b=-w,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=z(r=e.f,r.a,n),n.e=r}function Z(e){this.a=new q,this.b=e,this.c=S}function z(e,t,n){do t=t.c;while(null!==t.b&&!e.c(e.b,t.b,n));return e=new q(n,t.a,t),t.a.c=e,t.a=e}function q(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function K(){this.d=W,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}var W=0;function Y(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case W:X(e,100151),e.u(null);break;case 1:X(e,100152),e.t()}else switch(e.d){case 2:X(e,100154),e.v();break;case 1:X(e,100153),e.w()}}function X(e,t){e.p&&e.p(t,e.c)}function J(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function Q(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function $(e){return e.b.e}function ee(){this.c=new et,this.a=new J,this.b=new Q,this.d=new Q,this.b.b=this.d,this.d.b=this.b}function et(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function en(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ea}function er(e,t){if(e.e){var n,r=e.b,i=++r.a;return 2*i>r.f&&(r.f*=2,r.c=es(r.c,r.f+1)),0===r.b?n=i:(n=r.b,r.b=r.c[r.b]),r.e[n]=t,r.c[n]=i,r.d[i]=n,r.h&&el(r,i),n}return r=e.a++,e.c[r]=t,-(r+1)}function ei(e){if(0===e.a)return eu(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&n(eo(e.b),t))return eu(e.b);do--e.a;while(0<e.a&&null===e.c[e.d[e.a-1]]);return t}function ea(){this.d=es([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function es(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function eo(e){return e.e[e.d[1]]}function eu(e){var t=e.d,n=e.e,r=e.c,i=t[1],a=n[i];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[i]=null,r[i]=e.b,e.b=i,0<--e.a&&ec(e,1)),a}function ec(e,t){for(var r=e.d,i=e.e,a=e.c,s=t,o=r[s];;){var u=s<<1;u<e.a&&n(i[r[u+1]],i[r[u]])&&(u+=1);var c=r[u];if(u>e.a||n(i[o],i[c])){r[s]=o,a[o]=s;break}r[s]=c,a[c]=s,s=u}}function el(e,t){for(var r=e.d,i=e.e,a=e.c,s=t,o=r[s];;){var u=s>>1,c=r[u];if(0===u||n(i[c],i[o])){r[s]=o,a[o]=s;break}r[s]=c,a[c]=s,s=u}}function ef(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function eh(e){return e.e.c.b}function ep(e){return e.e.a.b}(A=K.prototype).x=function(){Y(this,W)},A.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:this.s=t;return}break;case 100141:this.m=!!t;return;default:X(this,100900);return}X(this,100901)},A.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:X(this,100900)}return!1},A.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},A.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:X(this,100900)}},A.C=function(e,t){var n=!1,r=[0,0,0];Y(this,2);for(var i=0;3>i;++i){var a=e[i];-1e150>a&&(a=-1e150,n=!0),1e150<a&&(a=1e150,n=!0),r[i]=a}n&&X(this,100155),null===(n=this.q)?h(n=f(this.b),n.b):(d(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},A.u=function(e){Y(this,W),this.d=1,this.b=new ee,this.c=e},A.t=function(){Y(this,1),this.d=2,this.q=null},A.v=function(){Y(this,2),this.d=1},A.w=function(){Y(this,1),this.d=W;var e=this.j[0],r=this.j[1],a=this.j[2],s=!1,o=[e,r,a];if(0===e&&0===r&&0===a){for(var r=[-2*1e150,-2*1e150,-2*1e150],l=[2*1e150,2*1e150,2*1e150],a=[],f=[],s=this.b.c,e=s.e;e!==s;e=e.e)for(var h=0;3>h;++h){var d=e.g[h];d<l[h]&&(l[h]=d,f[h]=e),d>r[h]&&(r[h]=d,a[h]=e)}if(e=0,r[1]-l[1]>r[0]-l[0]&&(e=1),r[2]-l[2]>r[e]-l[e]&&(e=2),l[e]>=r[e])o[0]=0,o[1]=0,o[2]=1;else{for(r=0,l=f[e],a=a[e],f=[0,0,0],l=[l.g[0]-a.g[0],l.g[1]-a.g[1],l.g[2]-a.g[2]],h=[0,0,0],e=s.e;e!==s;e=e.e)h[0]=e.g[0]-a.g[0],h[1]=e.g[1]-a.g[1],h[2]=e.g[2]-a.g[2],f[0]=l[1]*h[2]-l[2]*h[1],f[1]=l[2]*h[0]-l[0]*h[2],f[2]=l[0]*h[1]-l[1]*h[0],(d=f[0]*f[0]+f[1]*f[1]+f[2]*f[2])>r&&(r=d,o[0]=f[0],o[1]=f[1],o[2]=f[2]);0>=r&&(o[0]=o[1]=o[2]=0,o[E(l)]=1)}s=!0}for(f=E(o),e=this.b.c,r=(f+1)%3,a=(f+2)%3,f=0<o[f]?1:-1,o=e.e;o!==e;o=o.e)o.b=o.g[r],o.a=f*o.g[a];if(s){for(o=0,e=(s=this.b.a).b;e!==s;e=e.b)if(!(0>=(r=e.a).f))do o+=(r.a.b-r.b.a.b)*(r.a.a+r.b.a.a),r=r.e;while(r!==e.a);if(0>o)for(s=(o=this.b.c).e;s!==o;s=s.e)s.a=-s.a}for(this.n=!1,e=(o=this.b.b).h;e!==o;e=s)s=e.h,r=e.e,t(e.a,e.b.a)&&e.e.e!==e&&(U(this,r,e),p(e),r=(e=r).e),r.e===e&&(r!==e&&((r===s||r===s.b)&&(s=s.h),p(r)),(e===s||e===s.b)&&(s=s.h),p(e));for(this.e=o=new en,e=(s=this.b.c).e;e!==s;e=e.e)e.h=er(o,e);for(function(e){e.d=[];for(var t,r=0;r<e.a;r++)e.d[r]=r;e.d.sort((t=e.c,function(e,r){return n(t[e],t[r])?1:-1})),e.e=!0,function(e){for(var t=e.a;1<=t;--t)ec(e,t);e.h=!0}(e.b)}(o),this.f=new Z(this),H(this,-w),H(this,w);null!==(o=ei(this.e));){for(;;){a:if(0===(e=this.e).a)s=eo(e.b);else if(s=e.c[e.d[e.a-1]],0!==e.b.a&&n(e=eo(e.b),s)){s=e;break a}if(null===s||!t(s,o))break;s=ei(this.e),U(this,o.c,s.c)}G(this,o)}for(o=0,this.a=this.f.a.a.b.a.a;null!==(s=this.f.a.a.b);)s.h||++o,I(s);for(this.f=null,(o=this.e).b=null,o.d=null,this.e=o.c=null,e=(o=this.b).a.b;e!==o.a;e=s)s=e.b,(e=e.a).e.e===e&&(M(e.c,e),p(e));if(!this.n){if(o=this.b,this.m)for(e=o.b.h;e!==o.b;e=s)s=e.h,e.b.d.c!==e.d.c?e.f=e.d.c?1:-1:p(e);else for(e=o.a.b;e!==o.a;e=s)if(s=e.b,e.c){for(e=e.a;n(e.b.a,e.a);e=e.c.b);for(;n(e.a,e.b.a);e=e.e);for(r=e.c.b,a=void 0;e.e!==r;)if(n(e.b.a,r.a)){for(;r.e!==e&&(u(r.e)||0>=i(r.a,r.b.a,r.e.b.a));)r=(a=g(r.e,r)).b;r=r.c.b}else{for(;r.e!==e&&(c(e.c.b)||0<=i(e.b.a,e.a,e.c.b.a));)e=(a=g(e,e.c.b)).b;e=e.e}for(;r.e.e!==e;)r=(a=g(r.e,r)).b}if(this.h||this.i||this.k||this.l){if(this.m){for(s=(o=this.b).a.b;s!==o.a;s=s.b)if(s.c){this.h&&this.h(2,this.c),e=s.a;do this.k&&this.k(e.a.d,this.c),e=e.e;while(e!==s.a);this.i&&this.i(this.c)}}else{for(o=this.b,s=!!this.l,e=!1,r=-1,a=o.a.d;a!==o.a;a=a.d)if(a.c){e||(this.h&&this.h(4,this.c),e=!0),f=a.a;do s&&r!==(l=f.b.d.c?0:1)&&(r=l,this.l&&this.l(!!r,this.c)),this.k&&this.k(f.a.d,this.c),f=f.e;while(f!==a.a)}e&&this.i&&this.i(this.c)}}if(this.r){for(e=(o=this.b).a.b;e!==o.a;e=s)if(s=e.b,!e.c){a=(r=e.a).e,f=void 0;do a=(f=a).e,f.d=null,null===f.b.d&&(f.c===f?T(f.a,null):(f.a.c=f.c,y(f,$(f))),(l=f.b).c===l?T(l.a,null):(l.a.c=l.c,y(l,$(l))),_(f));while(f!==r);r=e.d,(e=e.b).d=r,r.b=e}this.r(this.b),this.c=this.b=null;return}}this.b=this.c=null},this.libtess={GluTesselator:K,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},K.prototype.gluDeleteTess=K.prototype.x,K.prototype.gluTessProperty=K.prototype.B,K.prototype.gluGetTessProperty=K.prototype.y,K.prototype.gluTessNormal=K.prototype.A,K.prototype.gluTessCallback=K.prototype.z,K.prototype.gluTessVertex=K.prototype.C,K.prototype.gluTessBeginPolygon=K.prototype.u,K.prototype.gluTessBeginContour=K.prototype.t,K.prototype.gluTessEndContour=K.prototype.v,K.prototype.gluTessEndPolygon=K.prototype.w,e.exports=this.libtess},8897:function(e,t,n){"use strict";var r=n(6239),i={body:"",args:[],thisVars:[],localVars:[]};function a(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var n=e.args[t];0===t?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function s(e){for(var t,n=[],i=0;i<e.args.length;++i)n.push("a"+i);return Function("P",["return function ",e.funcName,"_ndarrayops(",n.join(","),") {P(",n.join(","),");return a0}"].join(""))(r({args:e.args,pre:a(e.pre),body:a(e.body),post:a(e.proc),funcName:e.funcName}))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in o){var n=o[e];t[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var n=u[e];t[e]=s({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:e}),t[e+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var n=c[e];t[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<l.length;++e){var n=l[e];t[n]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),t[n+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var n=f[e];t[n]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),t[n+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),t[n+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),t[n+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var h=["atan2","pow"];!function(){for(var e=0;e<h.length;++e){var n=h[e];t[n+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),t[n+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),t[n+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),t[n+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),t.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},9471:function(e,t,n){var r=n(5822),i=n(2861);function a(e,t){for(var n=[],i=0;i<e.shape[0];i++)n.push(r(e.get(i),t.width));return n.join(" ")}function s(e,t){for(var n=[],r=0;r<e.shape[0];r++)n.push(a(e.pick(r,null),t));return n.join("\n")}function o(e,t){for(var n=[],r=0;r<e.shape[0];r++)n.push(s(e.pick(r,null,null),t),"");return n.join("\n")}e.exports=function(e,t){return(t||(t={}),"number"==typeof t&&(t={width:t}),t.width||(t.width=8),void 0===e.dimension&&(e=i(e)),1===e.dimension)?a(e,t):2===e.dimension?s(e,t):3===e.dimension?o(e,t):4===e.dimension?function(e,t){for(var n=[],r=3,i=0;i<e.shape[0];i++){var a=o(e.pick(i,null,null,null),t);n.push(a);for(var s=a.split("\n"),u=0;u<s.length;u++)r=Math.max(r,s[u].length)}return n.join("\n"+Array(r+1).join("-")+"\n\n")}(e,t):void 0}},2861:function(e,t,n){var r=n(6907),i=n(8738),a="undefined"!=typeof Float64Array;function s(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,n=Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(s);var r=Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function u(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var a="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",s=Function(a);return s()}if(0===t){var a="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",s=Function("TrivialArray",a);return s(c[e][0])}var a=["'use strict'"],u=r(t),l=u.map(function(e){return"i"+e}),f="this.offset+"+u.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=u.map(function(e){return"b"+e}).join(","),p=u.map(function(e){return"c"+e}).join(",");a.push("function "+n+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+u.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+n+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+n+"_set("+l.join(",")+",v){"),i?a.push("return this.data.set("+f+",v)}"):a.push("return this.data["+f+"]=v}"),a.push("proto.get=function "+n+"_get("+l.join(",")+"){"),i?a.push("return this.data.get("+f+")}"):a.push("return this.data["+f+"]}"),a.push("proto.index=function "+n+"_index(",l.join(),"){return "+f+"}"),a.push("proto.hi=function "+n+"_hi("+l.join(",")+"){return new "+n+"(this.data,"+u.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+u.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=u.map(function(e){return"a"+e+"=this.shape["+e+"]"}),g=u.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+n+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+g.join(","));for(var m=0;m<t;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");a.push("return new "+n+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"c"+e}).join(",")+",b)}"),a.push("proto.step=function "+n+"_step("+l.join(",")+"){var "+u.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+u.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var m=0;m<t;++m)a.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");a.push("return new "+n+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"b"+e}).join(",")+",c)}");for(var y=Array(t),b=Array(t),m=0;m<t;++m)y[m]="a[i"+m+"]",b[m]="b[i"+m+"]";a.push("proto.transpose=function "+n+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+b.join(",")+",this.offset)}"),a.push("proto.pick=function "+n+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var m=0;m<t;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+u.map(function(e){return"shape["+e+"]"}).join(",")+","+u.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var s=Function("CTOR_LIST","ORDER",a.join("\n"));return s(c[e],o)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e){var s=c.array[0];return s([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===n){n=Array(o);for(var l=o-1,f=1;l>=0;--l)n[l]=f,f*=t[l]}if(void 0===r){r=0;for(var l=0;l<o;++l)n[l]<0&&(r-=(t[l]-1)*n[l])}for(var h=function(e){if(i(e))return"buffer";if(a)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),p=c[h];p.length<=o+1;)p.push(u(h,p.length-1));var s=p[o+1];return s(e,t,n,r)}},3397:function(e,t,n){"use strict";var r=n(3993),i=n(3524),a=(0,r.Z)((0,i.Z)(!0));t.Z=a},3013:function(e,t,n){"use strict";n.r(t),n.d(t,{F:function(){return r},T:function(){return i},__:function(){return a},add:function(){return c},addIndex:function(){return d},adjust:function(){return m},all:function(){return A},allPass:function(){return ee},always:function(){return et},and:function(){return en},andThen:function(){return iT},any:function(){return ea},anyPass:function(){return es},ap:function(){return eo},aperture:function(){return el},append:function(){return ef},apply:function(){return eh},applySpec:function(){return eg},applyTo:function(){return em},ascend:function(){return ey},assoc:function(){return eb},assocPath:function(){return e_},binary:function(){return ex},bind:function(){return L},both:function(){return eM},call:function(){return eI},chain:function(){return eO},clamp:function(){return ej},clone:function(){return eU},comparator:function(){return eF},complement:function(){return eV},compose:function(){return eK},composeK:function(){return eW},composeP:function(){return eJ},composeWith:function(){return e2},concat:function(){return tp},cond:function(){return td},construct:function(){return tm},constructN:function(){return tg},contains:function(){return ty},converge:function(){return tb},countBy:function(){return tx},curry:function(){return eS},curryN:function(){return p},dec:function(){return tE},defaultTo:function(){return tA},descend:function(){return tw},difference:function(){return tI},differenceWith:function(){return tR},dissoc:function(){return tL},dissocPath:function(){return tj},divide:function(){return tP},drop:function(){return tU},dropLast:function(){return tH},dropLastWhile:function(){return tq},dropRepeats:function(){return tJ},dropRepeatsWith:function(){return tX},dropWhile:function(){return t0},either:function(){return t2},empty:function(){return t3},endsWith:function(){return t5},eqBy:function(){return t6},eqProps:function(){return t8},equals:function(){return e9},evolve:function(){return t9},filter:function(){return tc},find:function(){return nt},findIndex:function(){return ni},findLast:function(){return no},findLastIndex:function(){return nl},flatten:function(){return nf.Z},flip:function(){return nh},forEach:function(){return np},forEachObjIndexed:function(){return nd},fromPairs:function(){return ng},groupBy:function(){return nm},groupWith:function(){return ny},gt:function(){return nb},gte:function(){return nv},has:function(){return nT},hasIn:function(){return nx},hasPath:function(){return n_},head:function(){return eQ},identical:function(){return nE},identity:function(){return e0},ifElse:function(){return nA},inc:function(){return nw},includes:function(){return nM},indexBy:function(){return nS},indexOf:function(){return nI},init:function(){return nR},innerJoin:function(){return nL},insert:function(){return nN},insertAll:function(){return nO},intersection:function(){return nk},intersperse:function(){return nC},into:function(){return nG},invert:function(){return nH},invertObj:function(){return nZ},invoker:function(){return nz},is:function(){return nq},isEmpty:function(){return nK},isNil:function(){return ev},join:function(){return nW},juxt:function(){return nY},keys:function(){return Z},keysIn:function(){return nX},last:function(){return tY},lastIndexOf:function(){return nJ},length:function(){return n$},lens:function(){return n0},lensIndex:function(){return n1},lensPath:function(){return n2},lensProp:function(){return n3},lift:function(){return ew},liftN:function(){return eA},lt:function(){return n4},lte:function(){return n5},map:function(){return z},mapAccum:function(){return n6},mapAccumRight:function(){return n8},mapObjIndexed:function(){return n9},match:function(){return n7},mathMod:function(){return re},max:function(){return w},maxBy:function(){return rt},mean:function(){return rr},median:function(){return ri},memoizeWith:function(){return ra},merge:function(){return rs},mergeAll:function(){return ro},mergeDeepLeft:function(){return rl},mergeDeepRight:function(){return rf},mergeDeepWith:function(){return rh},mergeDeepWithKey:function(){return rc},mergeLeft:function(){return rp},mergeRight:function(){return rd},mergeWith:function(){return rg},mergeWithKey:function(){return ru},min:function(){return rm},minBy:function(){return ry},modulo:function(){return rb},move:function(){return rv},multiply:function(){return r_},nAry:function(){return eT},negate:function(){return rT},none:function(){return rx},not:function(){return eD},nth:function(){return W},nthArg:function(){return rE},o:function(){return rA},objOf:function(){return nF},of:function(){return rM},omit:function(){return rS},once:function(){return rI},or:function(){return t1},otherwise:function(){return rL},over:function(){return rO},pair:function(){return rj},partial:function(){return rk},partialRight:function(){return rC},partition:function(){return rU},path:function(){return X},pathEq:function(){return rF},pathOr:function(){return rD},pathSatisfies:function(){return rV},paths:function(){return Y},pick:function(){return rB},pickAll:function(){return rG},pickBy:function(){return rH},pipe:function(){return ez},pipeK:function(){return rZ},pipeP:function(){return eX},pipeWith:function(){return e1},pluck:function(){return Q},prepend:function(){return rz},product:function(){return rq},project:function(){return rW},prop:function(){return J},propEq:function(){return rY},propIs:function(){return rX},propOr:function(){return rJ},propSatisfies:function(){return rQ},props:function(){return r$},range:function(){return r0},reduce:function(){return $},reduceBy:function(){return tT},reduceRight:function(){return r1},reduceWhile:function(){return r2},reduced:function(){return r3},reject:function(){return tl},remove:function(){return tN},repeat:function(){return r5},replace:function(){return r6},reverse:function(){return eq},scan:function(){return r8},sequence:function(){return r9},set:function(){return r7},slice:function(){return eH},sort:function(){return ie},sortBy:function(){return it},sortWith:function(){return ir},split:function(){return ii},splitAt:function(){return ia},splitEvery:function(){return is},splitWhen:function(){return io},startsWith:function(){return iu},subtract:function(){return ic},sum:function(){return rn},symmetricDifference:function(){return il},symmetricDifferenceWith:function(){return ih},tail:function(){return eZ},take:function(){return tV},takeLast:function(){return t4},takeLastWhile:function(){return ip},takeWhile:function(){return im},tap:function(){return iv},test:function(){return i_},thunkify:function(){return i0},times:function(){return r4},toLower:function(){return ix},toPairs:function(){return iE},toPairsIn:function(){return iA},toString:function(){return th},toUpper:function(){return iw},transduce:function(){return iM},transpose:function(){return iS},traverse:function(){return iI},trim:function(){return iL},tryCatch:function(){return iN},type:function(){return ek},unapply:function(){return iO},unary:function(){return ij},uncurryN:function(){return iP},unfold:function(){return ik},union:function(){return iC},unionWith:function(){return iF},uniq:function(){return nP},uniqBy:function(){return nj},uniqWith:function(){return iU},unless:function(){return iD},unnest:function(){return iV},until:function(){return iB},update:function(){return tO},useWith:function(){return rK},values:function(){return ep},valuesIn:function(){return iG},view:function(){return iZ},when:function(){return iz},where:function(){return iq},whereEq:function(){return iK},without:function(){return iW},xor:function(){return iY},xprod:function(){return iX},zip:function(){return iJ},zipObj:function(){return iQ},zipWith:function(){return i$}});var r=function(){return!1},i=function(){return!0},a={"@@functional/placeholder":!0},s=n(3993),o=n(6508);function u(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return(0,o.Z)(n)?t:(0,s.Z)(function(t){return e(n,t)});default:return(0,o.Z)(n)&&(0,o.Z)(r)?t:(0,o.Z)(n)?(0,s.Z)(function(t){return e(t,r)}):(0,o.Z)(r)?(0,s.Z)(function(t){return e(n,t)}):e(n,r)}}}var c=u(function(e,t){return Number(e)+Number(t)});function l(e,t){t=t||[];var n,r=(e=e||[]).length,i=t.length,a=[];for(n=0;n<r;)a[a.length]=e[n],n+=1;for(n=0;n<i;)a[a.length]=t[n],n+=1;return a}function f(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,a){return t.apply(this,arguments)};case 6:return function(e,n,r,i,a,s){return t.apply(this,arguments)};case 7:return function(e,n,r,i,a,s,o){return t.apply(this,arguments)};case 8:return function(e,n,r,i,a,s,o,u){return t.apply(this,arguments)};case 9:return function(e,n,r,i,a,s,o,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,a,s,o,u,c,l){return t.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}}function h(e,t,n){return function(){for(var r,i=[],a=0,s=e,u=0;u<t.length||a<arguments.length;)u<t.length&&(!(0,o.Z)(t[u])||a>=arguments.length)?r=t[u]:(r=arguments[a],a+=1),i[u]=r,(0,o.Z)(r)||(s-=1),u+=1;return s<=0?n.apply(this,i):f(s,h(e,i,n))}}var p=u(function(e,t){return 1===e?(0,s.Z)(t):f(e,h(e,[],t))}),d=(0,s.Z)(function(e){return p(e.length,function(){var t=0,n=arguments[0],r=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var e=n.apply(this,l(arguments,[t,r]));return t+=1,e},e.apply(this,i)})});function g(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return(0,o.Z)(n)?t:u(function(t,r){return e(n,t,r)});case 2:return(0,o.Z)(n)&&(0,o.Z)(r)?t:(0,o.Z)(n)?u(function(t,n){return e(t,r,n)}):(0,o.Z)(r)?u(function(t,r){return e(n,t,r)}):(0,s.Z)(function(t){return e(n,r,t)});default:return(0,o.Z)(n)&&(0,o.Z)(r)&&(0,o.Z)(i)?t:(0,o.Z)(n)&&(0,o.Z)(r)?u(function(t,n){return e(t,n,i)}):(0,o.Z)(n)&&(0,o.Z)(i)?u(function(t,n){return e(t,r,n)}):(0,o.Z)(r)&&(0,o.Z)(i)?u(function(t,r){return e(n,t,r)}):(0,o.Z)(n)?(0,s.Z)(function(t){return e(t,r,i)}):(0,o.Z)(r)?(0,s.Z)(function(t){return e(n,t,i)}):(0,o.Z)(i)?(0,s.Z)(function(t){return e(n,r,t)}):e(n,r,i)}}}var m=g(function(e,t,n){if(e>=n.length||e<-n.length)return n;var r=(e<0?n.length:0)+e,i=l(n);return i[r]=t(n[r]),i}),y=n(5272);function b(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function v(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!(0,y.Z)(i)){for(var a=0;a<e.length;){if("function"==typeof i[e[a]])return i[e[a]].apply(i,r);a+=1}if(b(i))return t.apply(null,r)(i)}return n.apply(this,arguments)}}function _(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}var T={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},x=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=_(this.xf["@@transducer/step"](e,!1))),e},e}(),E=u(function(e,t){return new x(e,t)}),A=u(v(["all"],E,function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0})),w=u(function(e,t){return t>e?t:e});function M(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}var S=n(7201),I=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function R(e){return new I(e)}var L=u(function(e,t){return f(e.length,function(){return e.apply(t,arguments)})});function N(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function O(e,t,n,r){return e["@@transducer/result"](n[r](L(e["@@transducer/step"],e),t))}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function P(e,t,n){if("function"==typeof e&&(e=R(e)),(0,S.Z)(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return O(e,t,n,"fantasy-land/reduce");if(null!=n[j])return N(e,t,n[j]());if("function"==typeof n.next)return N(e,t,n);if("function"==typeof n.reduce)return O(e,t,n,"reduce");throw TypeError("reduce: list must be array or iterable")}var k=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),C=u(function(e,t){return new k(e,t)});function U(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var F=Object.prototype.toString,D=function(){return"[object Arguments]"===F.call(arguments)?function(e){return"[object Arguments]"===F.call(e)}:function(e){return U("callee",e)}}(),V=!({toString:null}).propertyIsEnumerable("toString"),B=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=function(){return arguments.propertyIsEnumerable("length")}(),H=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},Z="function"!=typeof Object.keys||G?(0,s.Z)(function(e){if(Object(e)!==e)return[];var t,n,r=[],i=G&&D(e);for(t in e)U(t,e)&&(!i||"length"!==t)&&(r[r.length]=t);if(V)for(n=B.length-1;n>=0;)U(t=B[n],e)&&!H(r,t)&&(r[r.length]=t),n-=1;return r}):(0,s.Z)(function(e){return Object(e)!==e?[]:Object.keys(e)}),z=u(v(["fantasy-land/map","map"],C,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return p(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return P(function(n,r){return n[r]=e(t[r]),n},{},Z(t));default:return M(e,t)}})),q=Number.isInteger||function(e){return e<<0===e},K=n(3459),W=u(function(e,t){var n=e<0?t.length+e:e;return(0,K.Z)(t)?t.charAt(n):t[n]}),Y=u(function(e,t){return e.map(function(e){for(var n,r=t,i=0;i<e.length;){if(null==r)return;r=q(n=e[i])?W(n,r):r[n],i+=1}return r})}),X=u(function(e,t){return Y([e],t)[0]}),J=u(function(e,t){return X([e],t)}),Q=u(function(e,t){return z(J(e),t)}),$=g(P),ee=(0,s.Z)(function(e){return p($(w,0,Q("length",e)),function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})}),et=(0,s.Z)(function(e){return function(){return e}}),en=u(function(e,t){return e&&t}),er=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=_(this.xf["@@transducer/step"](e,!0))),e},e}(),ei=u(function(e,t){return new er(e,t)}),ea=u(v(["any"],ei,function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1})),es=(0,s.Z)(function(e){return p($(w,0,Q("length",e)),function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1})}),eo=u(function(e,t){return"function"==typeof t["fantasy-land/ap"]?t["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(n){return e(n)(t(n))}:P(function(e,n){return l(e,z(n,t))},[],e)}),eu=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return l(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}(),ec=u(function(e,t){return new eu(e,t)}),el=u(v([],ec,function(e,t){for(var n=0,r=t.length-(e-1),i=Array(r>=0?r:0);n<r;)i[n]=Array.prototype.slice.call(t,n,n+e),n+=1;return i})),ef=u(function(e,t){return l(t,[e])}),eh=u(function(e,t){return e.apply(this,t)}),ep=(0,s.Z)(function(e){for(var t=Z(e),n=t.length,r=[],i=0;i<n;)r[i]=e[t[i]],i+=1;return r});function ed(e,t){return Z(t).reduce(function(n,r){return n[r]=e(t[r]),n},{})}var eg=(0,s.Z)(function e(t){return t=ed(function(t){return"function"==typeof t?t:e(t)},t),p($(w,0,Q("length",ep(t))),function(){var e=arguments;return ed(function(t){return eh(t,e)},t)})}),em=u(function(e,t){return t(e)}),ey=g(function(e,t,n){var r=e(t),i=e(n);return r<i?-1:r>i?1:0}),eb=g(function(e,t,n){var r={};for(var i in n)r[i]=n[i];return r[e]=t,r}),ev=(0,s.Z)(function(e){return null==e}),e_=g(function e(t,n,r){if(0===t.length)return n;var i=t[0];if(t.length>1){var a=!ev(r)&&U(i,r)?r[i]:q(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,a)}if(!(q(i)&&(0,y.Z)(r)))return eb(i,n,r);var s=[].concat(r);return s[i]=n,s}),eT=u(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,r){return t.call(this,e,n,r)};case 4:return function(e,n,r,i){return t.call(this,e,n,r,i)};case 5:return function(e,n,r,i,a){return t.call(this,e,n,r,i,a)};case 6:return function(e,n,r,i,a,s){return t.call(this,e,n,r,i,a,s)};case 7:return function(e,n,r,i,a,s,o){return t.call(this,e,n,r,i,a,s,o)};case 8:return function(e,n,r,i,a,s,o,u){return t.call(this,e,n,r,i,a,s,o,u)};case 9:return function(e,n,r,i,a,s,o,u,c){return t.call(this,e,n,r,i,a,s,o,u,c)};case 10:return function(e,n,r,i,a,s,o,u,c,l){return t.call(this,e,n,r,i,a,s,o,u,c,l)};default:throw Error("First argument to nAry must be a non-negative integer no greater than ten")}}),ex=(0,s.Z)(function(e){return eT(2,e)});function eE(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t}var eA=u(function(e,t){var n=p(e,t);return p(e,function(){return P(eo,z(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),ew=(0,s.Z)(function(e){return eA(e.length,e)}),eM=u(function(e,t){return eE(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:ew(en)(e,t)}),eS=(0,s.Z)(function(e){return p(e.length,e)}),eI=eS(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))}),eR=n(3524),eL=function(e){var t,n={"@@transducer/init":T.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){var r,i=e["@@transducer/step"](t,n);return i["@@transducer/reduced"]?{"@@transducer/value":i,"@@transducer/reduced":!0}:i}};return{"@@transducer/init":T.init,"@@transducer/result":function(e){return n["@@transducer/result"](e)},"@@transducer/step":function(e,t){return(0,S.Z)(t)?P(n,e,t):P(n,e,[t])}}},eN=u(function(e,t){return z(e,eL(t))}),eO=u(v(["fantasy-land/chain","chain"],eN,function(e,t){return"function"==typeof t?function(n){return e(t(n))(n)}:(0,eR.Z)(!1)(z(e,t))})),ej=g(function(e,t,n){if(e>t)throw Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>t?t:n});function eP(e){return RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var ek=(0,s.Z)(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function eC(e,t,n,r){var i=function(i){for(var a=t.length,s=0;s<a;){if(e===t[s])return n[s];s+=1}for(var o in t[s+1]=e,n[s+1]=i,e)i[o]=r?eC(e[o],t,n,!0):e[o];return i};switch(ek(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return eP(e);default:return e}}var eU=(0,s.Z)(function(e){return null!=e&&"function"==typeof e.clone?e.clone():eC(e,[],[],!0)}),eF=(0,s.Z)(function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}}),eD=(0,s.Z)(function(e){return!e}),eV=ew(eD);function eB(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function eG(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return(0,y.Z)(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var eH=g(eG("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)})),eZ=(0,s.Z)(eG("tail",eH(1,1/0)));function ez(){if(0===arguments.length)throw Error("pipe requires at least one argument");return f(arguments[0].length,$(eB,arguments[0],eZ(arguments)))}var eq=(0,s.Z)(function(e){return(0,K.Z)(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()});function eK(){if(0===arguments.length)throw Error("compose requires at least one argument");return ez.apply(this,eq(arguments))}function eW(){if(0===arguments.length)throw Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return eK(eK.apply(this,z(eO,e)),t)}function eY(e,t){return function(){var n=this;return e.apply(n,arguments).then(function(e){return t.call(n,e)})}}function eX(){if(0===arguments.length)throw Error("pipeP requires at least one argument");return f(arguments[0].length,$(eY,arguments[0],eZ(arguments)))}function eJ(){if(0===arguments.length)throw Error("composeP requires at least one argument");return eX.apply(this,eq(arguments))}var eQ=W(0);function e$(e){return e}var e0=(0,s.Z)(e$),e1=u(function(e,t){if(t.length<=0)return e0;var n=eQ(t),r=eZ(t);return f(n.length,function(){return P(function(t,n){return e.call(this,n,t)},n.apply(this,arguments),r)})}),e2=u(function(e,t){return e1.apply(this,[e,eq(t)])});function e3(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function e4(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}var e5="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};function e6(e,t,n,r){var i=e3(e),a=e3(t);function s(e,t){return e8(e,t,n.slice(),r.slice())}return!e4(function(e,t){return!e4(s,t,e)},a,i)}function e8(e,t,n,r){if(e5(e,t))return!0;var i,a,s=ek(e);if(s!==ek(t)||null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(null==(a=String(i=e.constructor).match(/^function (\w*)/))?"":a[1]))return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&e5(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!e5(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1}for(var o=n.length-1;o>=0;){if(n[o]===e)return r[o]===t;o-=1}switch(s){case"Map":if(e.size!==t.size)return!1;return e6(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":if(e.size!==t.size)return!1;return e6(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=Z(e);if(u.length!==Z(t).length)return!1;var c=n.concat([e]),l=r.concat([t]);for(o=u.length-1;o>=0;){var f=u[o];if(!(U(f,t)&&e8(t[f],e[f],c,l)))return!1;o-=1}return!0}var e9=u(function(e,t){return e8(e,t,[],[])});function e7(e,t,n){var r,i;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;n<e.length;){if(0===(i=e[n])&&1/i===r)return n;n+=1}return -1}if(t!=t){for(;n<e.length;){if("number"==typeof(i=e[n])&&i!=i)return n;n+=1}return -1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(null===t)return e.indexOf(t,n)}for(;n<e.length;){if(e9(e[n],t))return n;n+=1}return -1}function te(e,t){return e7(t,e,0)>=0}function tt(e){return'"'+e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var tn=function(e){return(e<10?"0":"")+e},tr="function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+tn(e.getUTCMonth()+1)+"-"+tn(e.getUTCDate())+"T"+tn(e.getUTCHours())+":"+tn(e.getUTCMinutes())+":"+tn(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function ti(e){return function(){return!e.apply(this,arguments)}}function ta(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}function ts(e){return"[object Object]"===Object.prototype.toString.call(e)}var to=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),tu=u(function(e,t){return new to(e,t)}),tc=u(v(["filter"],tu,function(e,t){return ts(t)?P(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{},Z(t)):ta(e,t)})),tl=u(function(e,t){return tc(ti(e),t)});function tf(e,t){var n=function(n){var r=t.concat([e]);return te(n,r)?"<Circular>":tf(n,r)},r=function(e,t){return M(function(t){return tt(t)+": "+n(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+M(n,e).join(", ")+"))";case"[object Array]":return"["+M(n,e).concat(r(e,tl(function(e){return/^\d+$/.test(e)},Z(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):tt(tr(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+n(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+n(e.valueOf())+")":tt(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var i=e.toString();if("[object Object]"!==i)return i}return"{"+r(e,Z(e)).join(", ")+"}"}}var th=(0,s.Z)(function(e){return tf(e,[])}),tp=u(function(e,t){if((0,y.Z)(e)){if((0,y.Z)(t))return e.concat(t);throw TypeError(th(t)+" is not an array")}if((0,K.Z)(e)){if((0,K.Z)(t))return e+t;throw TypeError(th(t)+" is not a string")}if(null!=e&&eE(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(null!=e&&eE(e.concat))return e.concat(t);throw TypeError(th(e)+' does not have a method named "concat" or "fantasy-land/concat"')}),td=(0,s.Z)(function(e){var t=$(w,0,z(function(e){return e[0].length},e));return f(t,function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})}),tg=u(function(e,t){if(e>10)throw Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:eS(eT(e,function(e,n,r,i,a,s,o,u,c,l){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,n);case 3:return new t(e,n,r);case 4:return new t(e,n,r,i);case 5:return new t(e,n,r,i,a);case 6:return new t(e,n,r,i,a,s);case 7:return new t(e,n,r,i,a,s,o);case 8:return new t(e,n,r,i,a,s,o,u);case 9:return new t(e,n,r,i,a,s,o,u,c);case 10:return new t(e,n,r,i,a,s,o,u,c,l)}}))}),tm=(0,s.Z)(function(e){return tg(e.length,e)}),ty=u(te),tb=u(function(e,t){return p($(w,0,Q("length",t)),function(){var n=arguments,r=this;return e.apply(r,M(function(e){return e.apply(r,n)},t))})}),tv=function(){function e(e,t,n,r){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=r,this.inputs={}}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(U(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},e}(),t_=h(4,[],function(e,t,n,r){return new tv(e,t,n,r)}),tT=h(4,[],v([],t_,function(e,t,n,r){return P(function(r,i){var a=n(i);return r[a]=e(U(a,r)?r[a]:eC(t,[],[],!1),i),r},{},r)})),tx=tT(function(e,t){return e+1},0),tE=c(-1),tA=u(function(e,t){return null==t||t!=t?e:t}),tw=g(function(e,t,n){var r=e(t),i=e(n);return r>i?-1:r<i?1:0}),tM=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!tS(e,!0,this)},e.prototype.has=function(e){return tS(e,!1,this)},e}();function tS(e,t,n){var r,i,a=typeof e;switch(a){case"string":case"number":if(0===e&&1/e==-1/0){if(n._items["-0"])return!0;return t&&(n._items["-0"]=!0),!1}if(null!==n._nativeSet){if(t)return r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r;return n._nativeSet.has(e)}if(!(a in n._items))return t&&(n._items[a]={},n._items[a][e]=!0),!1;if(e in n._items[a])return!0;return t&&(n._items[a][e]=!0),!1;case"boolean":if(!(a in n._items))return t&&(n._items[a]=e?[!1,!0]:[!0,!1]),!1;var s=e?1:0;if(n._items[a][s])return!0;return t&&(n._items[a][s]=!0),!1;case"function":if(null!==n._nativeSet){if(t)return r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r;return n._nativeSet.has(e)}if(!(a in n._items))return t&&(n._items[a]=[e]),!1;if(!te(e,n._items[a]))return t&&n._items[a].push(e),!1;return!0;case"undefined":if(n._items[a])return!0;return t&&(n._items[a]=!0),!1;case"object":if(null===e){if(!n._items.null)return t&&(n._items.null=!0),!1;return!0}default:if(!((a=Object.prototype.toString.call(e))in n._items))return t&&(n._items[a]=[e]),!1;if(!te(e,n._items[a]))return t&&n._items[a].push(e),!1;return!0}}var tI=u(function(e,t){for(var n=[],r=0,i=e.length,a=t.length,s=new tM,o=0;o<a;o+=1)s.add(t[o]);for(;r<i;)s.add(e[r])&&(n[n.length]=e[r]),r+=1;return n}),tR=g(function(e,t,n){for(var r=[],i=0,a=t.length;i<a;)e4(e,t[i],n)||e4(e,t[i],r)||r.push(t[i]),i+=1;return r}),tL=u(function(e,t){var n={};for(var r in t)n[r]=t[r];return delete n[e],n}),tN=g(function(e,t,n){var r=Array.prototype.slice.call(n,0);return r.splice(e,t),r}),tO=g(function(e,t,n){return m(e,et(t),n)}),tj=u(function e(t,n){switch(t.length){case 0:return n;case 1:return q(t[0])&&(0,y.Z)(n)?tN(t[0],1,n):tL(t[0],n);default:var r=t[0],i=Array.prototype.slice.call(t,1);if(null==n[r])return n;if(q(r)&&(0,y.Z)(n))return tO(r,e(i,n[r]),n);return eb(r,e(i,n[r]),n)}}),tP=u(function(e,t){return e/t}),tk=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},e}(),tC=u(function(e,t){return new tk(e,t)}),tU=u(v(["drop"],tC,function(e,t){return eH(Math.max(0,e),1/0,t)})),tF=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?_(n):n},e}(),tD=u(function(e,t){return new tF(e,t)}),tV=u(v(["take"],tD,function(e,t){return eH(0,e<0?1/0:e,t)})),tB=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=Array(e)}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}(),tG=u(function(e,t){return new tB(e,t)}),tH=u(v([],tG,function(e,t){return tV(e<t.length?t.length-e:0,t)})),tZ=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=P(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},e}(),tz=u(function(e,t){return new tZ(e,t)}),tq=u(v([],tz,function(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return eH(0,n+1,t)})),tK=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},e}(),tW=u(function(e,t){return new tK(e,t)}),tY=W(-1),tX=u(v([],tW,function(e,t){var n=[],r=1,i=t.length;if(0!==i)for(n[0]=t[0];r<i;)e(tY(n),t[r])||(n[n.length]=t[r]),r+=1;return n})),tJ=(0,s.Z)(v([],tW(e9),tX(e9))),tQ=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},e}(),t$=u(function(e,t){return new tQ(e,t)}),t0=u(v(["dropWhile"],t$,function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return eH(n,1/0,t)})),t1=u(function(e,t){return e||t}),t2=u(function(e,t){return eE(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:ew(t1)(e,t)}),t3=(0,s.Z)(function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():(0,y.Z)(e)?[]:(0,K.Z)(e)?"":ts(e)?{}:D(e)?function(){return arguments}():void 0}),t4=u(function(e,t){return tU(e>=0?t.length-e:0,t)}),t5=u(function(e,t){return e9(t4(e.length,t),e)}),t6=g(function(e,t,n){return e9(e(t),e(n))}),t8=g(function(e,t,n){return e9(t[e],n[e])}),t9=u(function e(t,n){var r,i,a,s=n instanceof Array?[]:{};for(i in n)a=typeof(r=t[i]),s[i]="function"===a?r(n[i]):r&&"object"===a?e(r,n[i]):n[i];return s}),t7=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=_(this.xf["@@transducer/step"](e,t))),e},e}(),ne=u(function(e,t){return new t7(e,t)}),nt=u(v(["find"],ne,function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}})),nn=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=_(this.xf["@@transducer/step"](e,this.idx))),e},e}(),nr=u(function(e,t){return new nn(e,t)}),ni=u(v([],nr,function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return n;n+=1}return -1})),na=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},e}(),ns=u(function(e,t){return new na(e,t)}),no=u(v([],ns,function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return t[n];n-=1}})),nu=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},e}(),nc=u(function(e,t){return new nu(e,t)}),nl=u(v([],nc,function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return n;n-=1}return -1})),nf=n(3397),nh=(0,s.Z)(function(e){return p(e.length,function(t,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=t,e.apply(this,r)})}),np=u(eG("forEach",function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t})),nd=u(function(e,t){for(var n=Z(t),r=0;r<n.length;){var i=n[r];e(t[i],i,t),r+=1}return t}),ng=(0,s.Z)(function(e){for(var t={},n=0;n<e.length;)t[e[n][0]]=e[n][1],n+=1;return t}),nm=u(eG("groupBy",tT(function(e,t){return null==e&&(e=[]),e.push(t),e},null))),ny=u(function(e,t){for(var n=[],r=0,i=t.length;r<i;){for(var a=r+1;a<i&&e(t[a-1],t[a]);)a+=1;n.push(t.slice(r,a)),r=a}return n}),nb=u(function(e,t){return e>t}),nv=u(function(e,t){return e>=t}),n_=u(function(e,t){if(0===e.length||ev(t))return!1;for(var n=t,r=0;r<e.length;){if(!(!ev(n)&&U(e[r],n)))return!1;n=n[e[r]],r+=1}return!0}),nT=u(function(e,t){return n_([e],t)}),nx=u(function(e,t){return e in t}),nE=u(e5),nA=g(function(e,t,n){return p(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})}),nw=c(1),nM=u(te),nS=tT(function(e,t){return t},null),nI=u(function(e,t){return"function"!=typeof t.indexOf||(0,y.Z)(t)?e7(t,e,0):t.indexOf(e)}),nR=eH(0,-1),nL=g(function(e,t,n){return ta(function(t){return e4(e,t,n)},t)}),nN=g(function(e,t,n){e=e<n.length&&e>=0?e:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(e,0,t),r}),nO=g(function(e,t,n){return e=e<n.length&&e>=0?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),t,Array.prototype.slice.call(n,e))}),nj=u(function(e,t){for(var n,r,i=new tM,a=[],s=0;s<t.length;)n=e(r=t[s]),i.add(n)&&a.push(r),s+=1;return a}),nP=nj(e0),nk=u(function(e,t){var n,r;return e.length>t.length?(n=e,r=t):(n=t,r=e),nP(ta(nh(te)(n),r))}),nC=u(eG("intersperse",function(e,t){for(var n=[],r=0,i=t.length;r<i;)r===i-1?n.push(t[r]):n.push(t[r],e),r+=1;return n})),nU="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var a in i)U(a,i)&&(t[a]=i[a]);n+=1}return t},nF=u(function(e,t){var n={};return n[e]=t,n}),nD={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":e$},nV={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":e$},nB={"@@transducer/init":Object,"@@transducer/step":function(e,t){return nU(e,(0,S.Z)(t)?nF(t[0],t[1]):t)},"@@transducer/result":e$},nG=g(function(e,t,n){return b(e)?P(t(e),e["@@transducer/init"](),n):P(t(function(e){if(b(e))return e;if((0,S.Z)(e))return nD;if("string"==typeof e)return nV;if("object"==typeof e)return nB;throw Error("Cannot create transformer for "+e)}(e)),eC(e,[],[],!1),n)}),nH=(0,s.Z)(function(e){for(var t=Z(e),n=t.length,r=0,i={};r<n;){var a=t[r],s=e[a],o=U(s,i)?i[s]:i[s]=[];o[o.length]=a,r+=1}return i}),nZ=(0,s.Z)(function(e){for(var t=Z(e),n=t.length,r=0,i={};r<n;){var a=t[r];i[e[a]]=a,r+=1}return i}),nz=u(function(e,t){return p(e+1,function(){var n=arguments[e];if(null!=n&&eE(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw TypeError(th(n)+' does not have a method named "'+t+'"')})}),nq=u(function(e,t){return null!=t&&t.constructor===e||t instanceof e}),nK=(0,s.Z)(function(e){return null!=e&&e9(e,t3(e))}),nW=nz(1,"join"),nY=(0,s.Z)(function(e){return tb(function(){return Array.prototype.slice.call(arguments,0)},e)}),nX=(0,s.Z)(function(e){var t,n=[];for(t in e)n[n.length]=t;return n}),nJ=u(function(e,t){if("function"==typeof t.lastIndexOf&&!(0,y.Z)(t))return t.lastIndexOf(e);for(var n=t.length-1;n>=0;){if(e9(t[n],e))return n;n-=1}return -1});function nQ(e){return"[object Number]"===Object.prototype.toString.call(e)}var n$=(0,s.Z)(function(e){return null!=e&&nQ(e.length)?e.length:NaN}),n0=u(function(e,t){return function(n){return function(r){return z(function(e){return t(e,r)},n(e(r)))}}}),n1=(0,s.Z)(function(e){return n0(W(e),tO(e))}),n2=(0,s.Z)(function(e){return n0(X(e),e_(e))}),n3=(0,s.Z)(function(e){return n0(J(e),eb(e))}),n4=u(function(e,t){return e<t}),n5=u(function(e,t){return e<=t}),n6=g(function(e,t,n){for(var r=0,i=n.length,a=[],s=[t];r<i;)s=e(s[0],n[r]),a[r]=s[1],r+=1;return[s[0],a]}),n8=g(function(e,t,n){for(var r=n.length-1,i=[],a=[t];r>=0;)a=e(a[0],n[r]),i[r]=a[1],r-=1;return[a[0],i]}),n9=u(function(e,t){return P(function(n,r){return n[r]=e(t[r],r,t),n},{},Z(t))}),n7=u(function(e,t){return t.match(e)||[]}),re=u(function(e,t){return q(e)&&q(t)&&!(t<1)?(e%t+t)%t:NaN}),rt=g(function(e,t,n){return e(n)>e(t)?n:t}),rn=$(c,0),rr=(0,s.Z)(function(e){return rn(e)/e.length}),ri=(0,s.Z)(function(e){var t=e.length;if(0===t)return NaN;var n=2-t%2,r=(t-n)/2;return rr(Array.prototype.slice.call(e,0).sort(function(e,t){return e<t?-1:e>t?1:0}).slice(r,r+n))}),ra=u(function(e,t){var n={};return f(t.length,function(){var r=e.apply(this,arguments);return U(r,n)||(n[r]=t.apply(this,arguments)),n[r]})}),rs=u(function(e,t){return nU({},e,t)}),ro=(0,s.Z)(function(e){return nU.apply(null,[{}].concat(e))}),ru=g(function(e,t,n){var r,i={};for(r in t)U(r,t)&&(i[r]=U(r,n)?e(r,t[r],n[r]):t[r]);for(r in n)U(r,n)&&!U(r,i)&&(i[r]=n[r]);return i}),rc=g(function e(t,n,r){return ru(function(n,r,i){return ts(r)&&ts(i)?e(t,r,i):t(n,r,i)},n,r)}),rl=u(function(e,t){return rc(function(e,t,n){return t},e,t)}),rf=u(function(e,t){return rc(function(e,t,n){return n},e,t)}),rh=g(function(e,t,n){return rc(function(t,n,r){return e(n,r)},t,n)}),rp=u(function(e,t){return nU({},t,e)}),rd=u(function(e,t){return nU({},e,t)}),rg=g(function(e,t,n){return ru(function(t,n,r){return e(n,r)},t,n)}),rm=u(function(e,t){return t<e?t:e}),ry=g(function(e,t,n){return e(n)<e(t)?n:t}),rb=u(function(e,t){return e%t}),rv=g(function(e,t,n){var r=n.length,i=n.slice(),a=e<0?r+e:e,s=t<0?r+t:t,o=i.splice(a,1);return a<0||a>=n.length||s<0||s>=n.length?n:[].concat(i.slice(0,s)).concat(o).concat(i.slice(s,n.length))}),r_=u(function(e,t){return e*t}),rT=(0,s.Z)(function(e){return-e}),rx=u(function(e,t){return A(ti(e),t)}),rE=(0,s.Z)(function(e){return p(e<0?1:e+1,function(){return W(e,arguments)})}),rA=g(function(e,t,n){return e(t(n))});function rw(e){return[e]}var rM=(0,s.Z)(rw),rS=u(function(e,t){for(var n={},r={},i=0,a=e.length;i<a;)r[e[i]]=1,i+=1;for(var s in t)r.hasOwnProperty(s)||(n[s]=t[s]);return n}),rI=(0,s.Z)(function(e){var t,n=!1;return f(e.length,function(){return n?t:(n=!0,t=e.apply(this,arguments))})});function rR(e,t){if(null==t||!eE(t.then))throw TypeError("`"+e+"` expected a Promise, received "+tf(t,[]))}var rL=u(function(e,t){return rR("otherwise",t),t.then(null,e)}),rN=function(e){return{value:e,map:function(t){return rN(t(e))}}},rO=g(function(e,t,n){return e(function(e){return rN(t(e))})(n).value}),rj=u(function(e,t){return[e,t]});function rP(e){return u(function(t,n){return f(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var rk=rP(l),rC=rP(nh(l)),rU=nY([tc,tl]),rF=g(function(e,t,n){return e9(X(e,n),t)}),rD=g(function(e,t,n){return tA(e,X(t,n))}),rV=g(function(e,t,n){return e(X(t,n))}),rB=u(function(e,t){for(var n={},r=0;r<e.length;)e[r]in t&&(n[e[r]]=t[e[r]]),r+=1;return n}),rG=u(function(e,t){for(var n={},r=0,i=e.length;r<i;){var a=e[r];n[a]=t[a],r+=1}return n}),rH=u(function(e,t){var n={};for(var r in t)e(t[r],r,t)&&(n[r]=t[r]);return n});function rZ(){if(0===arguments.length)throw Error("pipeK requires at least one argument");return eW.apply(this,eq(arguments))}var rz=u(function(e,t){return l([e],t)}),rq=$(r_,1),rK=u(function(e,t){return p(t.length,function(){for(var n=[],r=0;r<t.length;)n.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))})}),rW=rK(M,[rG,e0]),rY=g(function(e,t,n){return e9(t,n[e])}),rX=g(function(e,t,n){return nq(e,n[t])}),rJ=g(function(e,t,n){return rD(e,[t],n)}),rQ=g(function(e,t,n){return e(n[t])}),r$=u(function(e,t){return e.map(function(e){return X([e],t)})}),r0=u(function(e,t){if(!(nQ(e)&&nQ(t)))throw TypeError("Both arguments to range must be numbers");for(var n=[],r=e;r<t;)n.push(r),r+=1;return n}),r1=g(function(e,t,n){for(var r=n.length-1;r>=0;)t=e(n[r],t),r-=1;return t}),r2=h(4,[],function(e,t,n,r){return P(function(n,r){return e(n,r)?t(n,r):_(n)},n,r)}),r3=(0,s.Z)(_),r4=u(function(e,t){var n,r=Number(t),i=0;if(r<0||isNaN(r))throw RangeError("n must be a non-negative number");for(n=Array(r);i<r;)n[i]=e(i),i+=1;return n}),r5=u(function(e,t){return r4(et(e),t)}),r6=g(function(e,t,n){return n.replace(e,t)}),r8=g(function(e,t,n){for(var r=0,i=n.length,a=[t];r<i;)t=e(t,n[r]),a[r+1]=t,r+=1;return a}),r9=u(function(e,t){return"function"==typeof t.sequence?t.sequence(e):r1(function(e,t){return eo(z(rz,e),t)},e([]),t)}),r7=g(function(e,t,n){return rO(e,et(t),n)}),ie=u(function(e,t){return Array.prototype.slice.call(t,0).sort(e)}),it=u(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){var r=e(t),i=e(n);return r<i?-1:r>i?1:0})}),ir=u(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){for(var r=0,i=0;0===r&&i<e.length;)r=e[i](t,n),i+=1;return r})}),ii=nz(1,"split"),ia=u(function(e,t){return[eH(0,e,t),eH(e,n$(t),t)]}),is=u(function(e,t){if(e<=0)throw Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<t.length;)n.push(eH(r,r+=e,t));return n}),io=u(function(e,t){for(var n=0,r=t.length,i=[];n<r&&!e(t[n]);)i.push(t[n]),n+=1;return[i,Array.prototype.slice.call(t,n)]}),iu=u(function(e,t){return e9(tV(e.length,t),e)}),ic=u(function(e,t){return Number(e)-Number(t)}),il=u(function(e,t){return tp(tI(e,t),tI(t,e))}),ih=g(function(e,t,n){return tp(tR(e,t,n),tR(e,n,t))}),ip=u(function(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return eH(n+1,1/0,t)}),id=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):_(e)},e}(),ig=u(function(e,t){return new id(e,t)}),im=u(v(["takeWhile"],ig,function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return eH(0,n,t)})),iy=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=T.init,e.prototype["@@transducer/result"]=T.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},e}(),ib=u(function(e,t){return new iy(e,t)}),iv=u(v([],ib,function(e,t){return e(t),t})),i_=u(function(e,t){var n;if("[object RegExp]"!==Object.prototype.toString.call(e))throw TypeError("test requires a value of type RegExp as its first argument; received "+th(e));return eP(e).test(t)}),iT=u(function(e,t){return rR("andThen",t),t.then(e)}),ix=nz(0,"toLowerCase"),iE=(0,s.Z)(function(e){var t=[];for(var n in e)U(n,e)&&(t[t.length]=[n,e[n]]);return t}),iA=(0,s.Z)(function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t}),iw=nz(0,"toUpperCase"),iM=p(4,function(e,t,n,r){return P(e("function"==typeof t?R(t):t),n,r)}),iS=(0,s.Z)(function(e){for(var t=0,n=[];t<e.length;){for(var r=e[t],i=0;i<r.length;)void 0===n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;t+=1}return n}),iI=g(function(e,t,n){return"function"==typeof n["fantasy-land/traverse"]?n["fantasy-land/traverse"](t,e):r9(e,z(t,n))}),iR="	\n\v\f\r \xa0\u2028\u2029\uFEFF",iL="function"!=typeof String.prototype.trim||iR.trim()||!"".trim()?(0,s.Z)(function(e){var t=RegExp("^["+iR+"]["+iR+"]*"),n=RegExp("["+iR+"]["+iR+"]*$");return e.replace(t,"").replace(n,"")}):(0,s.Z)(function(e){return e.trim()}),iN=u(function(e,t){return f(e.length,function(){try{return e.apply(this,arguments)}catch(n){return t.apply(this,l([n],arguments))}})}),iO=(0,s.Z)(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}}),ij=(0,s.Z)(function(e){return eT(1,e)}),iP=u(function(e,t){return p(e,function(){for(var n,r=1,i=t,a=0;r<=e&&"function"==typeof i;)n=r===e?arguments.length:a+i.length,i=i.apply(this,Array.prototype.slice.call(arguments,a,n)),r+=1,a=n;return i})}),ik=u(function(e,t){for(var n=e(t),r=[];n&&n.length;)r[r.length]=n[0],n=e(n[1]);return r}),iC=u(eK(nP,l)),iU=u(function(e,t){for(var n,r=0,i=t.length,a=[];r<i;)e4(e,n=t[r],a)||(a[a.length]=n),r+=1;return a}),iF=g(function(e,t,n){return iU(e,l(t,n))}),iD=g(function(e,t,n){return e(n)?n:t(n)}),iV=eO(e$),iB=g(function(e,t,n){for(var r=n;!e(r);)r=t(r);return r}),iG=(0,s.Z)(function(e){var t,n=[];for(t in e)n[n.length]=e[t];return n}),iH=function(e){return{value:e,"fantasy-land/map":function(){return this}}},iZ=u(function(e,t){return e(iH)(t).value}),iz=g(function(e,t,n){return e(n)?t(n):n}),iq=u(function(e,t){for(var n in e)if(U(n,e)&&!e[n](t[n]))return!1;return!0}),iK=u(function(e,t){return iq(z(e9,e),t)}),iW=u(function(e,t){return tl(nh(te)(e),t)}),iY=u(function(e,t){return Boolean(!e^!t)}),iX=u(function(e,t){for(var n,r=0,i=e.length,a=t.length,s=[];r<i;){for(n=0;n<a;)s[s.length]=[e[r],t[n]],n+=1;r+=1}return s}),iJ=u(function(e,t){for(var n=[],r=0,i=Math.min(e.length,t.length);r<i;)n[r]=[e[r],t[r]],r+=1;return n}),iQ=u(function(e,t){for(var n=0,r=Math.min(e.length,t.length),i={};n<r;)i[e[n]]=t[n],n+=1;return i}),i$=g(function(e,t,n){for(var r=[],i=0,a=Math.min(t.length,n.length);i<a;)r[i]=e(t[i],n[i]),i+=1;return r}),i0=(0,s.Z)(function(e){return p(e.length,function(){var t=arguments;return function(){return e.apply(this,t)}})})},3993:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(6508);function i(e){return function t(n){return 0===arguments.length||(0,r.Z)(n)?t:e.apply(this,arguments)}}},5272:function(e,t){"use strict";t.Z=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)}},7201:function(e,t,n){"use strict";var r=n(3993),i=n(5272),a=n(3459),s=(0,r.Z)(function(e){return!!(0,i.Z)(e)||!(!e||"object"!=typeof e||(0,a.Z)(e))&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))});t.Z=s},6508:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}n.d(t,{Z:function(){return r}})},3459:function(e,t,n){"use strict";function r(e){return"[object String]"===Object.prototype.toString.call(e)}n.d(t,{Z:function(){return r}})},3524:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7201);function i(e){return function t(n){for(var i,a,s,o=[],u=0,c=n.length;u<c;){if((0,r.Z)(n[u]))for(i=e?t(n[u]):n[u],s=0,a=i.length;s<a;)o[o.length]=i[s],s+=1;else o[o.length]=n[u];u+=1}return o}}},6994:function(e){var t=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.object_stringify=function(e,t,n,i){var a="";if(null!=e)switch(typeof e){case"function":return"[Function"+(e.name?": "+e.name:"")+"]";case"object":if(e instanceof Error)return"["+e.toString()+"]";if(t>=n)return"[Object]";if(i&&(i=i.slice(0)).push(e),null!=e.length){a+="[";var s=[];for(var o in e)i&&i.indexOf(e[o])>=0?s.push("[Circular]"):s.push(r.object_stringify(e[o],t+1,n,i));a+=s.join(", ")+"]"}else{if("getMonth"in e)return"Date("+e+")";a+="{";var s=[];for(var u in e)e.hasOwnProperty(u)&&(i&&i.indexOf(e[u])>=0?s.push(u+": [Circular]"):s.push(u+": "+r.object_stringify(e[u],t+1,n,i)));a+=s.join(", ")+"}"}return a;case"string":return'"'+e+'"'}return""+e},r.format=function(i,a){var s,o,u,c,l,f,h,p=1,d=i.length,g="",m=[];for(o=0;o<d;o++)if("string"===(g=e(i[o])))m.push(i[o]);else if("array"===g){if((c=i[o])[2])for(u=0,s=a[p];u<c[2].length;u++){if(!s.hasOwnProperty(c[2][u]))throw Error(t('[sprintf] property "%s" does not exist',c[2][u]));s=s[c[2][u]]}else s=c[1]?a[c[1]]:a[p++];if(/[^sO]/.test(c[8])&&"number"!=e(s))throw Error(t('[sprintf] expecting number but found %s "'+s+'"',e(s)));switch(c[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=c[7]?s.toExponential(c[7]):s.toExponential();break;case"f":s=c[7]?parseFloat(s).toFixed(c[7]):parseFloat(s);break;case"O":s=r.object_stringify(s,0,parseInt(c[7])||5);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&c[7]?s.substring(0,c[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(c[8])&&c[3]&&s>=0?"+"+s:s,f=c[4]?"0"==c[4]?"0":c[4].charAt(1):" ",h=c[6]-String(s).length,l=c[6]?n(f,h):"",m.push(c[5]?s+l:l+s)}return m.join("")},r.cache={},r.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else if(null!==(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(t))){if(n[2]){i|=1;var a=[],s=n[2],o=[];if(null!==(o=/^([a-z_][a-z_\d]*)/i.exec(s)))for(a.push(o[1]);""!==(s=s.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(s)))a.push(o[1]);else if(null!==(o=/^\[(\d+)\]/.exec(s)))a.push(o[1]);else throw Error("[sprintf] "+s);else throw Error("[sprintf] "+s);n[2]=a}else i|=2;if(3===i)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}else throw Error("[sprintf] "+t);t=t.substring(n[0].length)}return r},r}(),n=function(e,n){var r=n.slice();return r.unshift(e),t.apply(null,r)};e.exports=t,t.sprintf=t,t.vsprintf=n},8706:function(e){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],a=e[0],s=1;s<r;++s)if(a=i,t(i=e[s],a)){if(s===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],a=1;a<n;++a,i=r)if(i=r,(r=e[a])!==i){if(a===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},4128:function(e,t,n){let r=n(2462);n(8897),n(4953);let i=(e,t,n,r,i,a)=>0===e||0===t||0===n||e===r-1||t===i-1||n===a-1,a=(e,t)=>{let n=e.shape,a=r(n,"uint8"),[s,o,u]=n;for(let c=0;c<s;++c)for(let l=0;l<o;++l)for(let f=0;f<u;++f){let h=e.get(c,l,f);t.includes(h)||i(c,l,f,s,o,u)?a.set(c,l,f,0):a.set(c,l,f,1)}return a};e.exports=a},7706:function(e,t,n){let r=n(4953),i=n(2655),a=n(2462),s=n(8897),o=(e,t)=>e.slice().map((e,n)=>e+t[n]),u=(e,t)=>e.every((e,n)=>e>=0&&e<t.shape[n]),c=(e,t,n)=>{let r=l(e),i=[t],a=e.get(...t);if(n===a)throw Error("Value to replace must be different from the replacing value");let s=[[0,-1],[-1,0],[1,0],[0,1]];for(;i.length>0;){let c=i.shift(),f=r.get(...c);u(c,e)&&f===a&&(r.set(...c,n),s.forEach(e=>{let t=o(c,e);i.push(t)}))}return r},l=e=>{let t=a(e.shape);return s.assign(t,e),t},f=e=>{let t=[],n=c(e.field,[0,0],1);for(let r=0;r<n.shape[0];r++)for(let i=0;i<n.shape[1];i++)0===n.get(r,i)&&(n=c(n,[r,i],1),t.push([r,i]));return t},h=e=>{let t=e.field;for(let n=0;n<t.shape[0];n++)if(1==t.get(n,1))return[n,1];throw new Exception("getContourWalkCompassStartPosition failed!")},p=e=>{let t=e.map(e=>{let t=h(e),n=i(e,t,!1),a=f(e),s=a.map(t=>i(e,t,!0)),o=r[e.direction].reduce((e,t)=>e+t,0)>0?1:0;return 0==o&&n.reverse(),{outerContour:n,innerContours:s,direction:e.direction,voxelValue:e.voxelValue}});return t};e.exports=p},2655:function(e,t,n){n(9471);let r=n(4953),i=n(3081),a=n(1042),s=n(4567),o=(e,t)=>e.slice().map((e,n)=>e+t[n]),u=(e,t)=>t.map(t=>t*e),c=(e,t)=>e.every((e,n)=>e==t[n])&&e.length==t.length,l={SW:0,NW:1,NE:2,SE:3},f=[[0,0],[0,1],[1,1],[1,0]],h=[{when:[0,1,0,0],necessary:!0,cornerPos:a.NORTH},{when:[1,0,0,0],necessary:!0,cornerPos:a.SOUTH},{when:[1,0,0,1],necessary:!1,cornerPos:a.EAST},{when:[0,1,1,0],necessary:!1,cornerPos:a.EAST},{when:[0,0,1,1],necessary:!0,cornerPos:a.NORTH},{when:[1,1,0,0],necessary:!0,cornerPos:a.SOUTH},{when:[1,0,1,1],necessary:!0,cornerPos:a.NORTH},{when:[0,1,1,1],necessary:!0,cornerPos:a.SOUTH},{when:[0,1,0,1],necessary:!0,cornerPos:a.NORTH,danger:!0},{when:[1,0,1,0],necessary:!0,cornerPos:a.SOUTH,danger:!0}],p=(e,t)=>{let n=0;return e==a.EAST&&(n=0),e==a.SOUTH&&(n=1),e==a.WEST&&(n=2),e==a.NORTH&&(n=3),(t+n)%4},d=(e,t,n)=>{let d=[];t=o(t,[-1,-1]);let g=a.EAST,m=o(t,s[g]),y=e.field,b=!1;for(;!b;){c(m,t)&&(b=!0);let v=y.get(...o(m,f[p(g,l.SW)])),_=y.get(...o(m,f[p(g,l.NW)])),T=y.get(...o(m,f[p(g,l.NE)])),x=y.get(...o(m,f[p(g,l.SE)])),E=n?[v,_,T,x].map(e=>0===e?1:0):[v,_,T,x],A=h.find(e=>c(e.when,E));g=p(g,A.cornerPos);let w=e.fieldMinPosition,M=r[e.direction].reduce((e,t)=>e+t,0)>0?1:0,S=u(M,r[e.direction]),I=o(S,w),R=r[i[e.direction][0]],L=r[i[e.direction][1]],N=u(m[0],L),O=u(m[1],R),j=o(N,O),P=o(I,j),k={x:P[0],y:P[1],z:P[2],necessary:A.necessary};A.necessary&&d.push(k),m=o(m,s[g])}return d};e.exports=d},3916:function(e,t,n){let r=n(2462),i=e=>{let t=e.shape,n=t.map(e=>e+2),i=n[0]-1,a=n[1]-1,s=n[2]-1,o=r(n,"int32");for(let u=1;u<i;++u)for(let c=1;c<a;++c)for(let l=1;l<s;++l){let f=e.get(u-1,c-1,l-1);o.set(u,c,l,f)}return o};e.exports=i},5034:function(e,t,n){let r=n(2462),i=n(1014),a=n(4953),s=n(3081),o=n(4567),u=(e,t)=>e.slice().map((e,n)=>e+t[n]),c=(e,t)=>e.slice().map((e,n)=>e-t[n]),l=(e,t)=>t.map(t=>t*e),f=(e,t,n)=>[t[1],t[0]].map((e,t)=>l(e,n[t])).reduce((e,t)=>u(e,t),e),h=(e,t,n,i,l)=>{let h=a[l],p=s[l].map(e=>a[e]),d=e.get(...i),g=[[0,0]],m=[[0,0]],y=[0,0],b=[0,0];for(;g.length>0;){let v=g.pop(),_=f(i,v,p);0==n.get(..._,l)&&(m.push(v.slice()),n.set(..._,l,1),v[0]<y[0]&&(y[0]=v[0]),v[1]<y[1]&&(y[1]=v[1]),v[0]>b[0]&&(b[0]=v[0]),v[1]>b[1]&&(b[1]=v[1]),p.forEach((n,r)=>{let i=u(_,n),a=u(i,h);if(e.get(...i)==d&&1==t.get(...i)&&0==t.get(...a)){let s=u(v,o[r]);g.push(s.slice())}}))}let T=r(u(c(b,y),[3,3]),"uint32");for(;m.length>0;){let x=m.pop();0===T.get(...u(c(x,y),[1,1]))&&T.set(...u(c(x,y),[1,1]),1)}return{voxelValue:e.get(...i),direction:l,field:T,fieldMinPosition:f(i,y,p)}},p=(e,t)=>{let n=r([...e.shape,6]),a=[],s=e.shape[0],o=e.shape[1],u=e.shape[2];for(let c=0;c<o;++c)for(let l=0;l<u;++l){let f=0;for(let p=0;p<s;++p){let d=t.get(p,c,l);if(f!=d){if(1==d&&0==n.get(p,c,l,i.NEGATIVE_X)){let g=h(e,t,n,[p,c,l],i.NEGATIVE_X);a.push(g)}if(0==d&&0==n.get(p-1,c,l,i.POSITIVE_X)){let m=h(e,t,n,[p-1,c,l],i.POSITIVE_X);a.push(m)}}f=d}}for(let y=0;y<s;++y)for(let b=0;b<u;++b){let v=0;for(let _=0;_<o;++_){let T=t.get(y,_,b);if(v!=T){if(1==T&&0==n.get(y,_,b,i.NEGATIVE_Y)){let x=h(e,t,n,[y,_,b],i.NEGATIVE_Y);a.push(x)}if(0==T&&0==n.get(y,_-1,b,i.POSITIVE_Y)){let E=h(e,t,n,[y,_-1,b],i.POSITIVE_Y);a.push(E)}}v=T}}for(let A=0;A<s;++A)for(let w=0;w<o;++w){let M=0;for(let S=0;S<u;++S){let I=t.get(A,w,S);if(M!=I){if(1==I&&0==n.get(A,w,S,i.NEGATIVE_Z)){let R=h(e,t,n,[A,w,S],i.NEGATIVE_Z);a.push(R)}if(0==I&&0==n.get(A,w,S-1,i.POSITIVE_Z)){let L=h(e,t,n,[A,w,S-1],i.POSITIVE_Z);a.push(L)}}M=I}}return a};e.exports=p},1042:function(e){e.exports={NORTH:0,EAST:1,SOUTH:2,WEST:3}},4567:function(e){e.exports=[[0,1],[1,0],[0,-1],[-1,0]]},1014:function(e){e.exports={NEGATIVE_Z:0,NEGATIVE_Y:1,NEGATIVE_X:2,POSITIVE_X:3,POSITIVE_Y:4,POSITIVE_Z:5}},4953:function(e){e.exports=[[0,0,-1],[0,-1,0],[-1,0,0],[1,0,0],[0,1,0],[0,0,1],]},3081:function(e,t,n){let r=n(1014),i=[[r.POSITIVE_Y,r.POSITIVE_X],[r.POSITIVE_X,r.POSITIVE_Z],[r.POSITIVE_Z,r.POSITIVE_Y],[r.POSITIVE_Z,r.POSITIVE_Y],[r.POSITIVE_X,r.POSITIVE_Z],[r.POSITIVE_Y,r.POSITIVE_X]];e.exports=i},7716:function(e,t,n){let r=n(2279),{flatten:i}=n(3013),{chunk:a}=n(6005),s=n(4953),o=e=>{let t=1/0;for(let n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return t},u=e=>{let t=-1/0;for(let n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t},c=e=>{let t=e.map(({outerContour:e,innerContours:t})=>i(e.concat(i(t)).map(({x:e,y:t,z:n})=>[e,t,n]))),n=o(t.map(e=>e[0])),r=u(t.map(e=>e[0])),a=o(t.map(e=>e[1])),s=u(t.map(e=>e[1])),c=o(t.map(e=>e[2])),l=u(t.map(e=>e[2]));return{tx:-((r-n)/2+n),ty:-((s-a)/2+a),tz:-((l-c)/2+c)}},l=e=>{let t=e.map(({outerContour:e,innerContours:t})=>i(e.concat(i(t)).map(({x:e,y:t,z:n})=>[e,t,n]))),n=o(t.map(e=>e[0])),r=u(t.map(e=>e[0])),a=o(t.map(e=>e[1])),s=u(t.map(e=>e[1])),c=o(t.map(e=>e[2])),l=u(t.map(e=>e[2]));return 1/Math.max(r-n,s-a,l-c)},f=e=>{let t=0,n=new r.GluTesselator;n.gluTessCallback(r.gluEnum.GLU_TESS_VERTEX_DATA,(e,t)=>t.push(e)),n.gluTessProperty(r.gluEnum.GLU_TESS_BOUNDARY_ONLY,!1);let{tx:o,ty:u,tz:f}=c(e),h=l(e),p=i(e.map(({outerContour:e,innerContours:t})=>{let n=e.concat(i(t)).map(({x:e,y:t,z:n})=>[(e+o)*h,(t+u)*h,(n+f)*h]);return i(n)})),d=i(e.map(({outerContour:e,innerContours:t,voxelValue:n})=>{let r=e.concat(i(t)).map(()=>n);return i(r)})),g=i(e.map(({outerContour:e,innerContours:t,direction:n})=>{let r=e.concat(i(t)).map(()=>s[n]);return i(r)})),m=i(e.map(({outerContour:e,innerContours:r})=>{let i=[];return n.gluTessBeginPolygon(i),n.gluTessBeginContour(),e.forEach(({x:e,y:r,z:i})=>{n.gluTessVertex([e,r,i],t),t++}),r.forEach(e=>{n.gluTessEndContour(),n.gluTessBeginContour(),e.slice().forEach(({x:e,y:r,z:i})=>{n.gluTessVertex([e,r,i],t),t++})}),n.gluTessEndContour(),n.gluTessEndPolygon(),(i=i.filter(e=>Number.isInteger(e))).length%3!=0&&(console.log("not dividable by 3"),console.log(i.length)),i.every(e=>Number.isInteger(e))||(console.log("not every index seems to be an Integer"),console.log(e,r)),i}));m.length%3!=0&&console.log("indices are not dividable by 3");let y=i(a(i(e.map(({outerContour:e,innerContours:t})=>{let n=e.concat(i(t)).map(({x:e,y:t,z:n})=>[Math.round(e+o+.5),Math.round(t+u+.5),Math.round(n+f+.5)]);return i(n)})),3)),b=i(a(m,3).map(e=>{let t=[3*e[0]+0,3*e[0]+1,3*e[0]+2,3*e[1]+0,3*e[1]+1,3*e[1]+2,3*e[2]+0,3*e[2]+1,3*e[2]+2].map(e=>y[e]);return t[0]===t[3]&&t[3]===t[6]?[t[1],t[2],t[4],t[5],t[7],t[8]]:t[1]===t[4]&&t[4]===t[7]?[t[0],t[2],t[3],t[5],t[6],t[8]]:t[2]===t[5]&&t[5]===t[8]?[t[0],t[1],t[3],t[4],t[6],t[7]]:void 0}));return{vertices:p,normals:g,indices:m,uvs:b,voxelValues:d}};e.exports=f},8794:function(e,t,n){let r=n(3916),i=n(4128),a=n(5034),s=n(7716),o=n(7706),u=(e,t)=>{let n=void 0===t?[0]:t.exclude||[0],u=r(e),c=i(u,n),l=a(u,c),f=o(l),h=s(f);return h};e.exports=u},2462:function(e,t,n){"use strict";var r=n(2861);e.exports=function(e,t){t=t||"float64";for(var n=1,i=0;i<e.length;++i)n*=e[i];return r(new(function(e){switch(e){case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float":case"float32":return Float32Array;case"double":case"float64":return Float64Array;case"uint8_clamped":return Uint8ClampedArray;case"generic":case"buffer":case"data":case"dataview":return ArrayBuffer;case"array":return Array}}(t))(n),e)}},943:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3375:function(e,t,n){"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},828:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3375),i=n(1566);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,r.Z)(e,t)||(0,i.Z)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9815:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(943),i=n(3375),a=n(1566);function s(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1566:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(943);function i(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return(0,r.Z)(e,t)}}},4878:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var r=n(9477);class i{constructor(){this.pluginCallbacks=[],this.register(function(e){return new d(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new b(e)})}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i=new p,a=[];for(let s=0,o=this.pluginCallbacks.length;s<o;s++)a.push(this.pluginCallbacks[s](i));i.setPlugins(a),i.write(e,t,r).catch(n)}parseAsync(e,t){let n=this;return new Promise(function(r,i){n.parse(e,r,i,t)})}}let a={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},s={};s[r.NearestFilter]=a.NEAREST,s[r.NearestMipmapNearestFilter]=a.NEAREST_MIPMAP_NEAREST,s[r.NearestMipmapLinearFilter]=a.NEAREST_MIPMAP_LINEAR,s[r.LinearFilter]=a.LINEAR,s[r.LinearMipmapNearestFilter]=a.LINEAR_MIPMAP_NEAREST,s[r.LinearMipmapLinearFilter]=a.LINEAR_MIPMAP_LINEAR,s[r.ClampToEdgeWrapping]=a.CLAMP_TO_EDGE,s[r.RepeatWrapping]=a.REPEAT,s[r.MirroredRepeatWrapping]=a.MIRRORED_REPEAT;let o={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function u(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}function c(e){return 4*Math.ceil(e/4)}function l(e,t=0){let n=c(e.byteLength);if(n!==e.byteLength){let r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(let i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}function f(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function h(e,t){if(void 0!==e.toBlob)return new Promise(n=>e.toBlob(n,t));let n;return"image/jpeg"===t?n=.92:"image/webp"===t&&(n=.8),e.convertToBlob({type:t,quality:n})}class p{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);let r=this.buffers,i=this.json;n=this.options;let a=this.extensionsUsed,s=new Blob(r,{type:"application/octet-stream"}),o=Object.keys(a);if(o.length>0&&(i.extensionsUsed=o),i.buffers&&i.buffers.length>0&&(i.buffers[0].byteLength=s.size),!0===n.binary){let u=new FileReader;u.readAsArrayBuffer(s),u.onloadend=function(){var e;let n=l(u.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,n.byteLength,!0),r.setUint32(4,5130562,!0);let a=l((e=JSON.stringify(i),new TextEncoder().encode(e).buffer),32),s=new DataView(new ArrayBuffer(8));s.setUint32(0,a.byteLength,!0),s.setUint32(4,1313821514,!0);let o=new ArrayBuffer(12),c=new DataView(o);c.setUint32(0,1179937895,!0),c.setUint32(4,2,!0);let f=12+s.byteLength+a.byteLength+r.byteLength+n.byteLength;c.setUint32(8,f,!0);let h=new Blob([o,s,a,r,n],{type:"application/octet-stream"}),p=new FileReader;p.readAsArrayBuffer(h),p.onloadend=function(){t(p.result)}}}else if(i.buffers&&i.buffers.length>0){let c=new FileReader;c.readAsDataURL(s),c.onloadend=function(){let e=c.result;i.buffers[0].uri=e,t(i)}}else t(i)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;let n=this.options,r=this.extensionsUsed;try{let i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){for(let a in void 0===t.extensions&&(t.extensions={}),i.gltfExtensions)t.extensions[a]=i.gltfExtensions[a],r[a]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(!1===this.uids.has(e)){let n=new Map;n.set(!0,this.uid++),n.set(!1,this.uid++),this.uids.set(e,n)}let r=this.uids.get(e);return r.get(t)}isNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return!1;let n=new r.Vector3;for(let i=0,a=e.count;i<a;i++)if(Math.abs(n.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);let n=e.clone(),i=new r.Vector3;for(let a=0,s=n.count;a<s;a++)i.fromBufferAttribute(n,a),0===i.x&&0===i.y&&0===i.z?i.setX(1):i.normalize(),n.setXYZ(a,i.x,i.y,i.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1,r={};(0!==t.offset.x||0!==t.offset.y)&&(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),(1!==t.repeat.x||1!==t.repeat.y)&&(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(e){return e.encoding===r.sRGBEncoding?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");let i=e?.image,a=t?.image,s=Math.max(i?.width||0,a?.width||0),o=Math.max(i?.height||0,a?.height||0),u=f();u.width=s,u.height=o;let c=u.getContext("2d");c.fillStyle="#00ffff",c.fillRect(0,0,s,o);let l=c.getImageData(0,0,s,o);if(i){c.drawImage(i,0,0,s,o);let h=n(e),p=c.getImageData(0,0,s,o).data;for(let d=2;d<p.length;d+=4)l.data[d]=256*h(p[d]/256)}if(a){c.drawImage(a,0,0,s,o);let g=n(t),m=c.getImageData(0,0,s,o).data;for(let y=1;y<m.length;y+=4)l.data[y]=256*g(m[y]/256)}c.putImageData(l,0,0);let b=(e||t).clone();return b.source=new r.Source(u),b.encoding=r.LinearEncoding,b}processBuffer(e){let t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,r,i){let s=this.json;s.bufferViews||(s.bufferViews=[]);let o;o=t===a.UNSIGNED_BYTE?1:t===a.UNSIGNED_SHORT?2:4;let u=c(r*e.itemSize*o),l=new DataView(new ArrayBuffer(u)),f=0;for(let h=n;h<n+r;h++)for(let p=0;p<e.itemSize;p++){let d;e.itemSize>4?d=e.array[h*e.itemSize+p]:0===p?d=e.getX(h):1===p?d=e.getY(h):2===p?d=e.getZ(h):3===p&&(d=e.getW(h)),t===a.FLOAT?l.setFloat32(f,d,!0):t===a.UNSIGNED_INT?l.setUint32(f,d,!0):t===a.UNSIGNED_SHORT?l.setUint16(f,d,!0):t===a.UNSIGNED_BYTE&&l.setUint8(f,d),f+=o}let g={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:u};void 0!==i&&(g.target=i),i===a.ARRAY_BUFFER&&(g.byteStride=e.itemSize*o),this.byteOffset+=u,s.bufferViews.push(g);let m={id:s.bufferViews.length-1,byteLength:0};return m}processBufferViewImage(e){let t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(r){let i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){let e=l(i.result),a={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(a)-1)}})}processAccessor(e,t,n,r){let i=this.options,s=this.json,o;if(e.array.constructor===Float32Array)o=a.FLOAT;else if(e.array.constructor===Uint32Array)o=a.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)o=a.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)o=a.UNSIGNED_BYTE;else throw Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(void 0===n&&(n=0),void 0===r&&(r=e.count),i.truncateDrawRange&&void 0!==t&&null===t.index){let u=n+r,c=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;(r=Math.min(u,c)-(n=Math.max(n,t.drawRange.start)))<0&&(r=0)}if(0===r)return null;let l=function(e,t,n){let r={min:Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=t;i<t+n;i++)for(let a=0;a<e.itemSize;a++){let s;e.itemSize>4?s=e.array[i*e.itemSize+a]:0===a?s=e.getX(i):1===a?s=e.getY(i):2===a?s=e.getZ(i):3===a&&(s=e.getW(i)),r.min[a]=Math.min(r.min[a],s),r.max[a]=Math.max(r.max[a],s)}return r}(e,n,r),f;void 0!==t&&(f=e===t.index?a.ELEMENT_ARRAY_BUFFER:a.ARRAY_BUFFER);let h=this.processBufferView(e,o,n,r,f),p={bufferView:h.id,byteOffset:h.byteOffset,componentType:o,count:r,max:l.max,min:l.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(p.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(p)-1}processImage(e,t,n,i="image/png"){let a=this,s=a.cache,o=a.json,u=a.options,c=a.pending;s.images.has(e)||s.images.set(e,{});let l=s.images.get(e),p=i+":flipY/"+n.toString();if(void 0!==l[p])return l[p];o.images||(o.images=[]);let d={mimeType:i},g=f();g.width=Math.min(e.width,u.maxTextureSize),g.height=Math.min(e.height,u.maxTextureSize);let m=g.getContext("2d");if(!0===n&&(m.translate(0,g.height),m.scale(1,-1)),void 0!==e.data){t!==r.RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>u.maxTextureSize||e.height>u.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);let y=new Uint8ClampedArray(e.height*e.width*4);for(let b=0;b<y.length;b+=4)y[b+0]=e.data[b+0],y[b+1]=e.data[b+1],y[b+2]=e.data[b+2],y[b+3]=e.data[b+3];m.putImageData(new ImageData(y,e.width,e.height),0,0)}else m.drawImage(e,0,0,g.width,g.height);!0===u.binary?c.push(h(g,i).then(e=>a.processBufferViewImage(e)).then(e=>{d.bufferView=e})):void 0!==g.toDataURL?d.uri=g.toDataURL(i):c.push(h(g,i).then(e=>new FileReader().readAsDataURL(e)).then(e=>{d.uri=e}));let v=o.images.push(d)-1;return l[p]=v,v}processSampler(e){let t=this.json;t.samplers||(t.samplers=[]);let n={magFilter:s[e.magFilter],minFilter:s[e.minFilter],wrapS:s[e.wrapS],wrapT:s[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){let t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);let r=e.userData.mimeType;"image/webp"===r&&(r="image/png");let i={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(i.name=e.name),this._invokeAll(function(t){t.writeTexture&&t.writeTexture(e,i)});let a=n.textures.push(i)-1;return t.textures.set(e,a),a}processMaterial(e){let t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);let i={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let a=e.color.toArray().concat([e.opacity]);if(u(a,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=a),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){let s=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),o={index:this.processTexture(s)};this.applyTextureTransform(o,s),i.pbrMetallicRoughness.metallicRoughnessTexture=o}if(e.map){let c={index:this.processTexture(e.map)};this.applyTextureTransform(c,e.map),i.pbrMetallicRoughness.baseColorTexture=c}if(e.emissive){let l=e.emissive.clone().multiplyScalar(e.emissiveIntensity),f=Math.max(l.r,l.g,l.b);if(f>1&&(l.multiplyScalar(1/f),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),f>0&&(i.emissiveFactor=l.toArray()),e.emissiveMap){let h={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(h,e.emissiveMap),i.emissiveTexture=h}}if(e.normalMap){let p={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(p.scale=e.normalScale.x),this.applyTextureTransform(p,e.normalMap),i.normalTexture=p}if(e.aoMap){let d={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(d.strength=e.aoMapIntensity),this.applyTextureTransform(d,e.aoMap),i.occlusionTexture=d}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===r.DoubleSide&&(i.doubleSided=!0),""!==e.name&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(t){t.writeMaterial&&t.writeMaterial(e,i)});let g=n.materials.push(i)-1;return t.materials.set(e,g),g}processMesh(e){let t=this.cache,n=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let s=0,o=e.material.length;s<o;s++)i.push(e.material[s].uuid);else i.push(e.material.uuid);let u=i.join(":");if(t.meshes.has(u))return t.meshes.get(u);let c=e.geometry,l;l=e.isLineSegments?a.LINES:e.isLineLoop?a.LINE_LOOP:e.isLine?a.LINE_STRIP:e.isPoints?a.POINTS:e.material.wireframe?a.LINES:a.TRIANGLES;let f={},h={},p=[],d=[],g={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},m=c.getAttribute("normal");void 0===m||this.isNormalizedNormalAttribute(m)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),c.setAttribute("normal",this.createNormalizedNormalAttribute(m)));let y=null;for(let b in c.attributes){if("morph"===b.slice(0,5))continue;let v=c.attributes[b];b=g[b]||b.toUpperCase();let _=/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/;if(_.test(b)||(b="_"+b),t.attributes.has(this.getUID(v))){h[b]=t.attributes.get(this.getUID(v));continue}y=null;let T=v.array;"JOINTS_0"!==b||T instanceof Uint16Array||T instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),y=new r.BufferAttribute(new Uint16Array(T),v.itemSize,v.normalized));let x=this.processAccessor(y||v,c);null!==x&&(h[b]=x,t.attributes.set(this.getUID(v),x))}if(void 0!==m&&c.setAttribute("normal",m),0===Object.keys(h).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){let E=[],A=[],w={};if(void 0!==e.morphTargetDictionary)for(let M in e.morphTargetDictionary)w[e.morphTargetDictionary[M]]=M;for(let S=0;S<e.morphTargetInfluences.length;++S){let I={},R=!1;for(let L in c.morphAttributes){if("position"!==L&&"normal"!==L){R||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),R=!0);continue}let N=c.morphAttributes[L][S],O=L.toUpperCase(),j=c.attributes[L];if(t.attributes.has(this.getUID(N,!0))){I[O]=t.attributes.get(this.getUID(N,!0));continue}let P=N.clone();if(!c.morphTargetsRelative)for(let k=0,C=N.count;k<C;k++)P.setXYZ(k,N.getX(k)-j.getX(k),N.getY(k)-j.getY(k),N.getZ(k)-j.getZ(k));I[O]=this.processAccessor(P,c),t.attributes.set(this.getUID(j,!0),I[O])}d.push(I),E.push(e.morphTargetInfluences[S]),void 0!==e.morphTargetDictionary&&A.push(w[S])}f.weights=E,A.length>0&&(f.extras={},f.extras.targetNames=A)}let U=Array.isArray(e.material);if(U&&0===c.groups.length)return null;let F=U?e.material:[e.material],D=U?c.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let V=0,B=D.length;V<B;V++){let G={mode:l,attributes:h};if(this.serializeUserData(c,G),d.length>0&&(G.targets=d),null!==c.index){let H=this.getUID(c.index);(void 0!==D[V].start||void 0!==D[V].count)&&(H+=":"+D[V].start+":"+D[V].count),t.attributes.has(H)?G.indices=t.attributes.get(H):(G.indices=this.processAccessor(c.index,c,D[V].start,D[V].count),t.attributes.set(H,G.indices)),null===G.indices&&delete G.indices}let Z=this.processMaterial(F[D[V].materialIndex]);null!==Z&&(G.material=Z),p.push(G)}f.primitives=p,n.meshes||(n.meshes=[]),this._invokeAll(function(t){t.writeMesh&&t.writeMesh(e,f)});let z=n.meshes.push(f)-1;return t.meshes.set(u,z),z}processCamera(e){let t=this.json;t.cameras||(t.cameras=[]);let n=e.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:r.MathUtils.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){let n=this.json,a=this.nodeMap;n.animations||(n.animations=[]),e=i.Utils.mergeMorphTargetTracks(e.clone(),t);let s=e.tracks,u=[],c=[];for(let l=0;l<s.length;++l){let f=s[l],h=r.PropertyBinding.parseTrackName(f.name),p=r.PropertyBinding.findNode(t,h.nodeName),d=o[h.propertyName];if("bones"===h.objectName&&(p=!0===p.isSkinnedMesh?p.skeleton.getBoneByName(h.objectIndex):void 0),!p||!d)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',f.name),null;let g=f.values.length/f.times.length;d===o.morphTargetInfluences&&(g/=p.morphTargetInfluences.length);let m;!0===f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(m="CUBICSPLINE",g/=3):m=f.getInterpolation()===r.InterpolateDiscrete?"STEP":"LINEAR",c.push({input:this.processAccessor(new r.BufferAttribute(f.times,1)),output:this.processAccessor(new r.BufferAttribute(f.values,g)),interpolation:m}),u.push({sampler:c.length-1,target:{node:a.get(p),path:d}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:c,channels:u}),n.animations.length-1}processSkin(e){let t=this.json,n=this.nodeMap,i=t.nodes[n.get(e)],a=e.skeleton;if(void 0===a)return null;let s=e.skeleton.bones[0];if(void 0===s)return null;let o=[],u=new Float32Array(16*a.bones.length),c=new r.Matrix4;for(let l=0;l<a.bones.length;++l)o.push(n.get(a.bones[l])),c.copy(a.boneInverses[l]),c.multiply(e.bindMatrix).toArray(u,16*l);void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new r.BufferAttribute(u,16)),joints:o,skeleton:n.get(s)});let f=i.skin=t.skins.length-1;return f}processNode(e){let t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);let i={};if(n.trs){let a=e.quaternion.toArray(),s=e.position.toArray(),o=e.scale.toArray();u(a,[0,0,0,1])||(i.rotation=a),u(s,[0,0,0])||(i.translation=s),u(o,[1,1,1])||(i.scale=o)}else{var c;e.matrixAutoUpdate&&e.updateMatrix(),!1===u((c=e.matrix).elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(i.matrix=e.matrix.elements)}if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){let l=this.processMesh(e);null!==l&&(i.mesh=l)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){let f=[];for(let h=0,p=e.children.length;h<p;h++){let d=e.children[h];if(d.visible||!1===n.onlyVisible){let g=this.processNode(d);null!==g&&f.push(g)}}f.length>0&&(i.children=f)}this._invokeAll(function(t){t.writeNode&&t.writeNode(e,i)});let m=t.nodes.push(i)-1;return r.set(e,m),m}processScene(e){let t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);let r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);let i=[];for(let a=0,s=e.children.length;a<s;a++){let o=e.children[a];if(o.visible||!1===n.onlyVisible){let u=this.processNode(o);null!==u&&i.push(u)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}processObjects(e){let t=new r.Scene;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){let t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(t){t.beforeParse&&t.beforeParse(e)});let n=[];for(let i=0;i<e.length;i++)e[i]instanceof r.Scene?this.processScene(e[i]):n.push(e[i]);n.length>0&&this.processObjects(n);for(let a=0;a<this.skins.length;++a)this.processSkin(this.skins[a]);for(let s=0;s<t.animations.length;++s)this.processAnimation(t.animations[s],e[0]);this._invokeAll(function(t){t.afterParse&&t.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class d{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}let n=this.writer,r=n.json,i=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=-((e.penumbra-1)*e.angle*1),a.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||0!==e.target.position.x||0!==e.target.position.y||-1!==e.target.position.z)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);let s=r.extensions[this.name].lights;s.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:s.length-1}}}class g{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;let n=this.writer,r=n.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class m{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;let n=this.writer,r=n.extensionsUsed,i={};t.pbrMetallicRoughness.baseColorFactor&&(i.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);let a=[1,1,1];if(e.specular.toArray(a,0),i.specularFactor=a,i.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(i.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){let s={index:n.processTexture(e.specularMap)};n.applyTextureTransform(s,e.specularMap),i.specularGlossinessTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class y{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;let n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){let a={index:n.processTexture(e.clearcoatMap)};n.applyTextureTransform(a,e.clearcoatMap),i.clearcoatTexture=a}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){let s={index:n.processTexture(e.clearcoatRoughnessMap)};n.applyTextureTransform(s,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=s}if(e.clearcoatNormalMap){let o={index:n.processTexture(e.clearcoatNormalMap)};n.applyTextureTransform(o,e.clearcoatNormalMap),i.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class b{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;let n=this.writer,r=n.extensionsUsed,i={};if(i.iridescenceFactor=e.iridescence,e.iridescenceMap){let a={index:n.processTexture(e.iridescenceMap)};n.applyTextureTransform(a,e.iridescenceMap),i.iridescenceTexture=a}if(i.iridescenceIor=e.iridescenceIOR,i.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){let s={index:n.processTexture(e.iridescenceThicknessMap)};n.applyTextureTransform(s,e.iridescenceThicknessMap),i.iridescenceThicknessTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class v{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){let a={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(a,e.transmissionMap),i.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class _{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){let a={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(a,e.thicknessMap),i.thicknessTexture=a}i.attenuationDistance=e.attenuationDistance,i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}i.Utils={insertKeyframe:function(e,t){let n=e.getValueSize(),r=new e.TimeBufferType(e.times.length+1),i=new e.ValueBufferType(e.values.length+n),a=e.createInterpolant(new e.ValueBufferType(n)),s;if(0===e.times.length){r[0]=t;for(let o=0;o<n;o++)i[o]=0;s=0}else if(t<e.times[0]){if(.001>Math.abs(e.times[0]-t))return 0;r[0]=t,r.set(e.times,1),i.set(a.evaluate(t),0),i.set(e.values,n),s=0}else if(t>e.times[e.times.length-1]){if(.001>Math.abs(e.times[e.times.length-1]-t))return e.times.length-1;r[r.length-1]=t,r.set(e.times,0),i.set(e.values,0),i.set(a.evaluate(t),e.values.length),s=r.length-1}else for(let u=0;u<e.times.length;u++){if(.001>Math.abs(e.times[u]-t))return u;if(e.times[u]<t&&e.times[u+1]>t){r.set(e.times.slice(0,u+1),0),r[u+1]=t,r.set(e.times.slice(u+1),u+2),i.set(e.values.slice(0,(u+1)*n),0),i.set(a.evaluate(t),(u+1)*n),i.set(e.values.slice((u+1)*n),(u+2)*n),s=u+1;break}}return e.times=r,e.values=i,s},mergeMorphTargetTracks:function(e,t){let n=[],i={},a=e.tracks;for(let s=0;s<a.length;++s){let o=a[s],u=r.PropertyBinding.parseTrackName(o.name),c=r.PropertyBinding.findNode(t,u.nodeName);if("morphTargetInfluences"!==u.propertyName||void 0===u.propertyIndex){n.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(o=o.clone()).setInterpolation(r.InterpolateLinear)}let l=c.morphTargetInfluences.length,f=c.morphTargetDictionary[u.propertyIndex];if(void 0===f)throw Error("THREE.GLTFExporter: Morph target name not found: "+u.propertyIndex);let h;if(void 0===i[c.uuid]){h=o.clone();let p=new h.ValueBufferType(l*h.times.length);for(let d=0;d<h.times.length;d++)p[d*l+f]=h.values[d];h.name=(u.nodeName||"")+".morphTargetInfluences",h.values=p,i[c.uuid]=h,n.push(h);continue}let g=o.createInterpolant(new o.ValueBufferType(1));h=i[c.uuid];for(let m=0;m<h.times.length;m++)h.values[m*l+f]=g.evaluate(h.times[m]);for(let y=0;y<o.times.length;y++){let b=this.insertKeyframe(h,o.times[y]);h.values[b*l+f]=o.values[y]}}return e.tracks=n,e}}},2854:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});var r=n(9477);let i=new WeakMap;class a extends r.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){let a=new r.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,e=>{this.decodeDracoFile(e,t).catch(i)},n,i)}decodeDracoFile(e,t,n,r){let i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let n=JSON.stringify(t);if(i.has(e)){let r=i.get(e);if(r.key===n)return r.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let a,s=this.workerNextTaskID++,o=e.byteLength,u=this._getWorker(s,o).then(n=>(a=n,new Promise((n,r)=>{a._callbacks[s]={resolve:n,reject:r},a.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return u.catch(()=>!0).then(()=>{a&&s&&this._releaseTask(a,s)}),i.set(e,{key:n,promise:u}),u}_createGeometry(e){let t=new r.BufferGeometry;e.index&&t.setIndex(new r.BufferAttribute(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n],a=i.name,s=i.array,o=i.itemSize;t.setAttribute(a,new r.BufferAttribute(s,o))}return t}_loadLibrary(e,t){let n=new r.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,r)=>{n.load(e,t,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let r=s.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(e){let t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function s(){let e,t;function n(e,t,n,r,i,a){let s=a.num_components(),o=n.num_points(),u=o*s,c=u*i.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),f=e._malloc(c);t.GetAttributeDataArrayForAllPoints(n,a,l,c,f);let h=new i(e.HEAPF32.buffer,f,u).slice();return e._free(f),{name:r,array:h,itemSize:s}}onmessage=function(r){let i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let a=i.buffer,s=i.taskConfig;t.then(e=>{let t=e.draco,r=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(a),a.byteLength);try{let u=function(e,t,r,i){let a=i.attributeIDs,s=i.attributeTypes,o,u,c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,u=t.DecodeBufferToMesh(r,o);else if(c===e.POINT_CLOUD)o=new e.PointCloud,u=t.DecodeBufferToPointCloud(r,o);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||0===o.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());let l={index:null,attributes:[]};for(let f in a){let h=self[s[f]],p,d;if(i.useUniqueIDs)d=a[f],p=t.GetAttributeByUniqueId(o,d);else{if(-1===(d=t.GetAttributeId(o,e[a[f]])))continue;p=t.GetAttribute(o,d)}l.attributes.push(n(e,t,o,f,h,p))}return c===e.TRIANGULAR_MESH&&(l.index=function(e,t,n){let r=n.num_faces(),i=3*r,a=4*i,s=e._malloc(a);t.GetTrianglesUInt32Array(n,a,s);let o=new Uint32Array(e.HEAPF32.buffer,s,i).slice();return e._free(s),{array:o,itemSize:1}}(e,t,o)),e.destroy(o),l}(t,r,o,s),c=u.attributes.map(e=>e.array.buffer);u.index&&c.push(u.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:u},c)}catch(l){console.error(l),self.postMessage({type:"error",id:i.id,error:l.message})}finally{t.destroy(o),t.destroy(r)}})}}}},1217:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(9477);class i extends r.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new l(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new h(e)}),this.register(function(e){return new p(e)}),this.register(function(e){return new d(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new c(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new f(e)}),this.register(function(e){return new o(e)}),this.register(function(e){return new v(e)})}load(e,t,n,i){let a=this,s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);let o=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},u=new r.FileLoader(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(n){try{a.parse(n,s,function(n){t(n),a.manager.itemEnd(e)},o)}catch(r){o(r)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let a,o={},c={};if("string"==typeof e)a=e;else{let l=r.LoaderUtils.decodeText(new Uint8Array(e,0,4));if(l===_){try{o[s.KHR_BINARY_GLTF]=new x(e)}catch(f){i&&i(f);return}a=o[s.KHR_BINARY_GLTF].content}else a=r.LoaderUtils.decodeText(new Uint8Array(e))}let h=JSON.parse(a);if(void 0===h.asset||h.asset.version[0]<2){i&&i(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let p=new K(h,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});p.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){let g=this.pluginCallbacks[d](p);c[g.name]=g,o[g.name]=!0}if(h.extensionsUsed)for(let m=0;m<h.extensionsUsed.length;++m){let y=h.extensionsUsed[m],b=h.extensionsRequired||[];switch(y){case s.KHR_MATERIALS_UNLIT:o[y]=new u;break;case s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[y]=new M;break;case s.KHR_DRACO_MESH_COMPRESSION:o[y]=new E(h,this.dracoLoader);break;case s.KHR_TEXTURE_TRANSFORM:o[y]=new A;break;case s.KHR_MESH_QUANTIZATION:o[y]=new S;break;default:b.indexOf(y)>=0&&void 0===c[y]&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}p.setExtensions(o),p.setPlugins(c),p.parse(n,i)}parseAsync(e,t){let n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function a(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let s={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class o{constructor(e){this.parser=e,this.name=s.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){let i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){let t=this.parser,n="light:"+e,i=t.cache.get(n);if(i)return i;let a=t.json,s=a.extensions&&a.extensions[this.name]||{},o=s.lights||[],u=o[e],c,l=new r.Color(16777215);void 0!==u.color&&l.fromArray(u.color);let f=void 0!==u.range?u.range:0;switch(u.type){case"directional":(c=new r.DirectionalLight(l)).target.position.set(0,0,-1),c.add(c.target);break;case"point":(c=new r.PointLight(l)).distance=f;break;case"spot":(c=new r.SpotLight(l)).distance=f,u.spot=u.spot||{},u.spot.innerConeAngle=void 0!==u.spot.innerConeAngle?u.spot.innerConeAngle:0,u.spot.outerConeAngle=void 0!==u.spot.outerConeAngle?u.spot.outerConeAngle:Math.PI/4,c.angle=u.spot.outerConeAngle,c.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return c.position.set(0,0,0),c.decay=2,void 0!==u.intensity&&(c.intensity=u.intensity),c.name=t.createUniqueName(u.name||"light_"+e),i=Promise.resolve(c),t.cache.add(n,i),i}createNodeAttachment(e){let t=this,n=this.parser,r=n.json,i=r.nodes[e],a=i.extensions&&i.extensions[this.name]||{},s=a.light;return void 0===s?null:this._loadLight(s).then(function(e){return n._getNodeRef(t.cache,s,e)})}}class u{constructor(){this.name=s.KHR_MATERIALS_UNLIT}getMaterialType(){return r.MeshBasicMaterial}extendParams(e,t,n){let i=[];e.color=new r.Color(1,1,1),e.opacity=1;let a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let s=a.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}void 0!==a.baseColorTexture&&i.push(n.assignTexture(e,"map",a.baseColorTexture,r.sRGBEncoding))}return Promise.all(i)}}class c{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=r.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class l{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){let o=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new r.Vector2(o,o)}return Promise.all(a)}}class f{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class h{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[];t.sheenColor=new r.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&t.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,r.sRGBEncoding)),void 0!==s.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class p{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class d{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||0;let o=s.attenuationColor||[1,1,1];return t.attenuationColor=new r.Color(o[0],o[1],o[2]),Promise.all(a)}}class g{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=r.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class m{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));let o=s.specularColorFactor||[1,1,1];return t.specularColor=new r.Color(o[0],o[1],o[2]),void 0!==s.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,r.sRGBEncoding)),Promise.all(a)}}class y{constructor(e){this.parser=e,this.name=s.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(!(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,i.source,a)}}class b{constructor(e){this.parser=e,this.name=s.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],s=r.images[a.source],o=n.textureLoader;if(s.uri){let u=n.options.manager.getHandler(s.uri);null!==u&&(o=u)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class v{constructor(e){this.name=s.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,n=t.bufferViews[e];if(!n.extensions||!n.extensions[this.name])return null;{let r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return i.then(function(e){let t=r.byteOffset||0,n=r.byteLength||0,i=r.count,s=r.byteStride,o=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,s,o,r.mode,r.filter).then(function(e){return e.buffer}):a.ready.then(function(){let e=new ArrayBuffer(i*s);return a.decodeGltfBuffer(new Uint8Array(e),i,s,o,r.mode,r.filter),e})})}}}let _="glTF",T={JSON:1313821514,BIN:5130562};class x{constructor(e){this.name=s.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12);if(this.header={magic:r.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==_)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let n=this.header.length-12,i=new DataView(e,12),a=0;for(;a<n;){let o=i.getUint32(a,!0);a+=4;let u=i.getUint32(a,!0);if(a+=4,u===T.JSON){let c=new Uint8Array(e,12+a,o);this.content=r.LoaderUtils.decodeText(c)}else if(u===T.BIN){let l=12+a;this.body=e.slice(l,l+o)}a+=o}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class E{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=s.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},u={};for(let c in a){let l=C[c]||c.toLowerCase();s[l]=a[c]}for(let f in e.attributes){let h=C[f]||f.toLowerCase();if(void 0!==a[f]){let p=n.accessors[e.attributes[f]],d=O[p.componentType];u[h]=d.name,o[h]=!0===p.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,function(e){for(let n in e.attributes){let r=e.attributes[n],i=o[n];void 0!==i&&(r.normalized=i)}t(e)},s,u)})})}}class A{constructor(){this.name=s.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class w extends r.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;let t={specular:{value:new r.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=t,this.onBeforeCompile=function(e){for(let n in t)e.uniforms[n]=t[n];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n	uniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n	specularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n	vec4 texelGlossiness = texture2D( glossinessMap, vUv );\n	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n	glossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\nmaterial.specularColor = specularFactor;")},Object.defineProperties(this,{specular:{get:function(){return t.specular.value},set:function(e){t.specular.value=e}},specularMap:{get:function(){return t.specularMap.value},set:function(e){t.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return t.glossiness.value},set:function(e){t.glossiness.value=e}},glossinessMap:{get:function(){return t.glossinessMap.value},set:function(e){t.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class M{constructor(){this.name=s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return w}extendParams(e,t,n){let i=t.extensions[this.name];e.color=new r.Color(1,1,1),e.opacity=1;let a=[];if(Array.isArray(i.diffuseFactor)){let s=i.diffuseFactor;e.color.fromArray(s),e.opacity=s[3]}if(void 0!==i.diffuseTexture&&a.push(n.assignTexture(e,"map",i.diffuseTexture,r.sRGBEncoding)),e.emissive=new r.Color(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new r.Color(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){let o=i.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",o)),a.push(n.assignTexture(e,"specularMap",o,r.sRGBEncoding))}return Promise.all(a)}createMaterial(e){let t=new w(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=r.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class S{constructor(){this.name=s.KHR_MESH_QUANTIZATION}}class I extends r.Interpolant{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let a=0;a!==r;a++)t[a]=n[i+a];return t}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,u=3*s,c=r-t,l=(n-t)/c,f=l*l,h=f*l,p=e*u,d=p-u,g=-2*h+3*f,m=h-f,y=1-g,b=m-f+l;for(let v=0;v!==s;v++){let _=a[d+v+s],T=a[d+v+o]*c,x=a[p+v+s],E=a[p+v]*c;i[v]=y*_+b*T+g*x+m*E}return i}}let R=new r.Quaternion;class L extends I{interpolate_(e,t,n,r){let i=super.interpolate_(e,t,n,r);return R.fromArray(i).normalize().toArray(i),i}}let N={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},O={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},j={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipmapNearestFilter,9985:r.LinearMipmapNearestFilter,9986:r.NearestMipmapLinearFilter,9987:r.LinearMipmapLinearFilter},P={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},k={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},C={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},U={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},F={CUBICSPLINE:void 0,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},D={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function V(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide})),e.DefaultMaterial}function B(e,t,n){for(let r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function G(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function H(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){let i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Z(e){let t=e.extensions&&e.extensions[s.KHR_DRACO_MESH_COMPRESSION],n;return t?"draco:"+t.bufferView+":"+t.indices+":"+z(t.attributes):e.indices+":"+z(e.attributes)+":"+e.mode}function z(e){let t="",n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function q(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class K{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new a,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||n||i&&s<98?this.textureLoader=new r.TextureLoader(this.options.manager):this.textureLoader=new r.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera"),])}).then(function(t){let a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};B(i,a,r),G(a,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){let a=t[r].joints;for(let s=0,o=a.length;s<o;s++)e[a[s]].isBone=!0}for(let u=0,c=e.length;u<c;u++){let l=e[u];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;let r=n.clone(),i=(e,t)=>{let n=this.associations.get(e);for(let[r,a]of(null!=n&&this.associations.set(t,n),e.children.entries()))i(a,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){let r=e(t[n]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let n=[];for(let r=0;r<t.length;r++){let i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){let n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[s.KHR_BINARY_GLTF].body);let i=this.options;return new Promise(function(e,a){n.load(r.LoaderUtils.resolveURL(t.uri,i.path),e,void 0,function(){a(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){let t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);let a=[];return void 0!==i.bufferView?a.push(this.getDependency("bufferView",i.bufferView)):a.push(null),void 0!==i.sparse&&(a.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(a).then(function(e){let a=e[0],s=k[i.type],o=O[i.componentType],u=o.BYTES_PER_ELEMENT,c=i.byteOffset||0,l=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,f=!0===i.normalized,h,p;if(l&&l!==u*s){let d=Math.floor(c/l),g="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+d+":"+i.count,m=t.cache.get(g);m||(h=new o(a,d*l,i.count*l/u),m=new r.InterleavedBuffer(h,l/u),t.cache.add(g,m)),p=new r.InterleavedBufferAttribute(m,s,c%l/u,f)}else h=null===a?new o(i.count*s):new o(a,c,i.count*s),p=new r.BufferAttribute(h,s,f);if(void 0!==i.sparse){let y=k.SCALAR,b=O[i.sparse.indices.componentType],v=i.sparse.indices.byteOffset||0,_=i.sparse.values.byteOffset||0,T=new b(e[1],v,i.sparse.count*y),x=new o(e[2],_,i.sparse.count*s);null!==a&&(p=new r.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let E=0,A=T.length;E<A;E++){let w=T[E];if(p.setX(w,x[E*s]),s>=2&&p.setY(w,x[E*s+1]),s>=3&&p.setZ(w,x[E*s+2]),s>=4&&p.setW(w,x[E*s+3]),s>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){let t=this.json,n=this.options,r=t.textures[e],i=r.source,a=t.images[i],s=this.textureLoader;if(a.uri){let o=n.manager.getHandler(a.uri);null!==o&&(s=o)}return this.loadTextureImage(e,i,s)}loadTextureImage(e,t,n){let i=this,a=this.json,s=a.textures[e],o=a.images[t],u=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[u])return this.textureCache[u];let c=this.loadImageSource(t,n).then(function(t){t.flipY=!1,s.name&&(t.name=s.name);let n=a.samplers||{},o=n[s.sampler]||{};return t.magFilter=j[o.magFilter]||r.LinearFilter,t.minFilter=j[o.minFilter]||r.LinearMipmapLinearFilter,t.wrapS=P[o.wrapS]||r.RepeatWrapping,t.wrapT=P[o.wrapT]||r.RepeatWrapping,i.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[u]=c,c}loadImageSource(e,t){let n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let a=n.images[e],s=self.URL||self.webkitURL,o=a.uri||"",u=!1;if(void 0!==a.bufferView)o=this.getDependency("bufferView",a.bufferView).then(function(e){u=!0;let t=new Blob([e],{type:a.mimeType});return o=s.createObjectURL(t)});else if(void 0===a.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let c=Promise.resolve(o).then(function(e){return new Promise(function(n,a){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){let t=new r.Texture(e);t.needsUpdate=!0,n(t)}),t.load(r.LoaderUtils.resolveURL(e,i.path),s,void 0,a)})}).then(function(e){var t;return!0===u&&s.revokeObjectURL(o),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){let i=this;return this.getDependency("texture",n.index).then(function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[s.KHR_TEXTURE_TRANSFORM]){let o=void 0!==n.extensions?n.extensions[s.KHR_TEXTURE_TRANSFORM]:void 0;if(o){let u=i.associations.get(a);a=i.extensions[s.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,u)}}return void 0!==r&&(a.encoding=r),e[t]=a,a})}assignFinalMaterial(e){let t=e.geometry,n=e.material,i=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){let o="PointsMaterial:"+n.uuid,u=this.cache.get(o);u||(u=new r.PointsMaterial,r.Material.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(o,u)),n=u}else if(e.isLine){let c="LineBasicMaterial:"+n.uuid,l=this.cache.get(c);l||(l=new r.LineBasicMaterial,r.Material.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(c,l)),n=l}if(i||a||s){let f="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(f+="specular-glossiness:"),i&&(f+="derivative-tangents:"),a&&(f+="vertex-colors:"),s&&(f+="flat-shading:");let h=this.cache.get(f);h||(h=n.clone(),a&&(h.vertexColors=!0),s&&(h.flatShading=!0),i&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(f,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return r.MeshStandardMaterial}loadMaterial(e){let t=this,n=this.json,i=this.extensions,a=n.materials[e],o,u={},c=a.extensions||{},l=[];if(c[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){let f=i[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),l.push(f.extendParams(u,a,t))}else if(c[s.KHR_MATERIALS_UNLIT]){let h=i[s.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),l.push(h.extendParams(u,a,t))}else{let p=a.pbrMetallicRoughness||{};if(u.color=new r.Color(1,1,1),u.opacity=1,Array.isArray(p.baseColorFactor)){let d=p.baseColorFactor;u.color.fromArray(d),u.opacity=d[3]}void 0!==p.baseColorTexture&&l.push(t.assignTexture(u,"map",p.baseColorTexture,r.sRGBEncoding)),u.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,u.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(l.push(t.assignTexture(u,"metalnessMap",p.metallicRoughnessTexture)),l.push(t.assignTexture(u,"roughnessMap",p.metallicRoughnessTexture))),o=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,u)})))}!0===a.doubleSided&&(u.side=r.DoubleSide);let g=a.alphaMode||D.OPAQUE;if(g===D.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,g===D.MASK&&(u.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&o!==r.MeshBasicMaterial&&(l.push(t.assignTexture(u,"normalMap",a.normalTexture)),u.normalScale=new r.Vector2(1,1),void 0!==a.normalTexture.scale)){let m=a.normalTexture.scale;u.normalScale.set(m,m)}return void 0!==a.occlusionTexture&&o!==r.MeshBasicMaterial&&(l.push(t.assignTexture(u,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(u.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&o!==r.MeshBasicMaterial&&(u.emissive=new r.Color().fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&o!==r.MeshBasicMaterial&&l.push(t.assignTexture(u,"emissiveMap",a.emissiveTexture,r.sRGBEncoding)),Promise.all(l).then(function(){let n;return n=o===w?i[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(u):new o(u),a.name&&(n.name=a.name),G(n,a),t.associations.set(n,{materials:e}),a.extensions&&B(i,n,a),n})}createUniqueName(e){let t=r.PropertyBinding.sanitizeNodeName(e||""),n=t;for(let i=1;this.nodeNamesUsed[n];++i)n=t+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){let t=this,n=this.extensions,i=this.primitiveCache;function a(e){return n[s.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return Y(n,e,t)})}let o=[];for(let u=0,c=e.length;u<c;u++){let l=e[u],f=Z(l),h=i[f];if(h)o.push(h.promise);else{let p;p=l.extensions&&l.extensions[s.KHR_DRACO_MESH_COMPRESSION]?a(l):Y(new r.BufferGeometry,l,t),i[f]={primitive:l,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){let t=this,n=this.json,i=this.extensions,a=n.meshes[e],s=a.primitives,o=[];for(let u=0,c=s.length;u<c;u++){let l=void 0===s[u].material?V(this.cache):this.getDependency("material",s[u].material);o.push(l)}return o.push(t.loadGeometries(s)),Promise.all(o).then(function(n){let o=n.slice(0,n.length-1),u=n[n.length-1],c=[];for(let l=0,f=u.length;l<f;l++){let h=u[l],p=s[l],d,g=o[l];if(p.mode===N.TRIANGLES||p.mode===N.TRIANGLE_STRIP||p.mode===N.TRIANGLE_FAN||void 0===p.mode)!0!==(d=!0===a.isSkinnedMesh?new r.SkinnedMesh(h,g):new r.Mesh(h,g)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),p.mode===N.TRIANGLE_STRIP?d.geometry=X(d.geometry,r.TriangleStripDrawMode):p.mode===N.TRIANGLE_FAN&&(d.geometry=X(d.geometry,r.TriangleFanDrawMode));else if(p.mode===N.LINES)d=new r.LineSegments(h,g);else if(p.mode===N.LINE_STRIP)d=new r.Line(h,g);else if(p.mode===N.LINE_LOOP)d=new r.LineLoop(h,g);else if(p.mode===N.POINTS)d=new r.Points(h,g);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(d.geometry.morphAttributes).length>0&&H(d,a),d.name=t.createUniqueName(a.name||"mesh_"+e),G(d,a),p.extensions&&B(i,d,p),t.assignFinalMaterial(d),c.push(d)}for(let m=0,y=c.length;m<y;m++)t.associations.set(c[m],{meshes:e,primitives:m});if(1===c.length)return c[0];let b=new r.Group;t.associations.set(b,{meshes:e});for(let v=0,_=c.length;v<_;v++)b.add(c[v]);return b})}loadCamera(e){let t,n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===n.type?t=new r.PerspectiveCamera(r.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),G(t,n),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})}loadAnimation(e){let t=this.json,n=t.animations[e],i=[],a=[],s=[],o=[],u=[];for(let c=0,l=n.channels.length;c<l;c++){let f=n.channels[c],h=n.samplers[f.sampler],p=f.target,d=p.node,g=void 0!==n.parameters?n.parameters[h.input]:h.input,m=void 0!==n.parameters?n.parameters[h.output]:h.output;i.push(this.getDependency("node",d)),a.push(this.getDependency("accessor",g)),s.push(this.getDependency("accessor",m)),o.push(h),u.push(p)}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(s),Promise.all(o),Promise.all(u)]).then(function(t){let i=t[0],a=t[1],s=t[2],o=t[3],u=t[4],c=[];for(let l=0,f=i.length;l<f;l++){let h=i[l],p=a[l],d=s[l],g=o[l],m=u[l];if(void 0===h)continue;h.updateMatrix();let y;switch(U[m.path]){case U.weights:y=r.NumberKeyframeTrack;break;case U.rotation:y=r.QuaternionKeyframeTrack;break;case U.position:case U.scale:default:y=r.VectorKeyframeTrack}let b=h.name?h.name:h.uuid,v=void 0!==g.interpolation?F[g.interpolation]:r.InterpolateLinear,_=[];U[m.path]===U.weights?h.traverse(function(e){e.morphTargetInfluences&&_.push(e.name?e.name:e.uuid)}):_.push(b);let T=d.array;if(d.normalized){let x=q(T.constructor),E=new Float32Array(T.length);for(let A=0,w=T.length;A<w;A++)E[A]=T[A]*x;T=E}for(let M=0,S=_.length;M<S;M++){let R=new y(_[M]+"."+U[m.path],p.array,T,v);"CUBICSPLINE"===g.interpolation&&(R.createInterpolant=function(e){let t=this instanceof r.QuaternionKeyframeTrack?L:I;return new t(this.times,this.values,this.getValueSize()/3,e)},R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(R)}}let N=n.name?n.name:"animation_"+e;return new r.AnimationClip(N,void 0,c)})}createNodeMesh(e){let t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){let t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){let t=this.json,n=this.extensions,i=this,a=t.nodes[e],s=a.name?i.createUniqueName(a.name):"";return(function(){let t=[],n=i._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return n&&t.push(n),void 0!==a.camera&&t.push(i.getDependency("camera",a.camera).then(function(e){return i._getNodeRef(i.cameraCache,a.camera,e)})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){t.push(e)}),Promise.all(t)})().then(function(t){let o;if((o=!0===a.isBone?new r.Bone:t.length>1?new r.Group:1===t.length?t[0]:new r.Object3D)!==t[0])for(let u=0,c=t.length;u<c;u++)o.add(t[u]);if(a.name&&(o.userData.name=a.name,o.name=s),G(o,a),a.extensions&&B(n,o,a),void 0!==a.matrix){let l=new r.Matrix4;l.fromArray(a.matrix),o.applyMatrix4(l)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=e,o})}loadScene(e){let t=this.json,n=this.extensions,i=this.json.scenes[e],a=this,s=new r.Group;i.name&&(s.name=a.createUniqueName(i.name)),G(s,i),i.extensions&&B(n,s,i);let o=i.nodes||[],u=[];for(let c=0,l=o.length;c<l;c++)u.push(W(o[c],s,t,a));return Promise.all(u).then(function(){return a.associations=(e=>{let t=new Map;for(let[n,i]of a.associations)(n instanceof r.Material||n instanceof r.Texture)&&t.set(n,i);return e.traverse(e=>{let n=a.associations.get(e);null!=n&&t.set(e,n)}),t})(s),s})}}function W(e,t,n,i){let a=n.nodes[e];return i.getDependency("node",e).then(function(e){if(void 0===a.skin)return e;let t;return i.getDependency("skin",a.skin).then(function(e){t=e;let n=[];for(let r=0,a=t.joints.length;r<a;r++)n.push(i.getDependency("node",t.joints[r]));return Promise.all(n)}).then(function(n){return e.traverse(function(e){if(!e.isMesh)return;let i=[],a=[];for(let s=0,o=n.length;s<o;s++){let u=n[s];if(u){i.push(u);let c=new r.Matrix4;void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*s),a.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}e.bind(new r.Skeleton(i,a),e.matrixWorld)}),e})}).then(function(e){t.add(e);let r=[];if(a.children){let s=a.children;for(let o=0,u=s.length;o<u;o++){let c=s[o];r.push(W(c,e,n,i))}}return Promise.all(r)})}function Y(e,t,n){let i=t.attributes,a=[];function s(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}for(let o in i){let u=C[o]||o.toLowerCase();u in e.attributes||a.push(s(i[o],u))}if(void 0!==t.indices&&!e.index){let c=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});a.push(c)}return G(e,t),!function(e,t,n){let i=t.attributes,a=new r.Box3;if(void 0===i.POSITION)return;{let s=n.json.accessors[i.POSITION],o=s.min,u=s.max;if(void 0!==o&&void 0!==u){if(a.set(new r.Vector3(o[0],o[1],o[2]),new r.Vector3(u[0],u[1],u[2])),s.normalized){let c=q(O[s.componentType]);a.min.multiplyScalar(c),a.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let l=t.targets;if(void 0!==l){let f=new r.Vector3,h=new r.Vector3;for(let p=0,d=l.length;p<d;p++){let g=l[p];if(void 0!==g.POSITION){let m=n.json.accessors[g.POSITION],y=m.min,b=m.max;if(void 0!==y&&void 0!==b){if(h.setX(Math.max(Math.abs(y[0]),Math.abs(b[0]))),h.setY(Math.max(Math.abs(y[1]),Math.abs(b[1]))),h.setZ(Math.max(Math.abs(y[2]),Math.abs(b[2]))),m.normalized){let v=q(O[m.componentType]);h.multiplyScalar(v)}f.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(f)}e.boundingBox=a;let _=new r.Sphere;a.getCenter(_.center),_.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=_}(e,t,n),Promise.all(a).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,a=!1;for(let s=0,o=t.length;s<o;s++){let u=t[s];if(void 0!==u.POSITION&&(r=!0),void 0!==u.NORMAL&&(i=!0),void 0!==u.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);let c=[],l=[],f=[];for(let h=0,p=t.length;h<p;h++){let d=t[h];if(r){let g=void 0!==d.POSITION?n.getDependency("accessor",d.POSITION):e.attributes.position;c.push(g)}if(i){let m=void 0!==d.NORMAL?n.getDependency("accessor",d.NORMAL):e.attributes.normal;l.push(m)}if(a){let y=void 0!==d.COLOR_0?n.getDependency("accessor",d.COLOR_0):e.attributes.color;f.push(y)}}return Promise.all([Promise.all(c),Promise.all(l),Promise.all(f)]).then(function(t){let n=t[0],s=t[1],o=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=s),a&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}function X(e,t){let n=e.getIndex();if(null===n){let i=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let s=0;s<a.count;s++)i.push(s);e.setIndex(i),n=e.getIndex()}let o=n.count-2,u=[];if(t===r.TriangleFanDrawMode)for(let c=1;c<=o;c++)u.push(n.getX(0)),u.push(n.getX(c)),u.push(n.getX(c+1));else for(let l=0;l<o;l++)l%2==0?(u.push(n.getX(l)),u.push(n.getX(l+1)),u.push(n.getX(l+2))):(u.push(n.getX(l+2)),u.push(n.getX(l+1)),u.push(n.getX(l)));u.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let f=e.clone();return f.setIndex(u),f}},6005:function(e,t,n){"use strict";n.r(t),n.d(t,{VERSION:function(){return i},after:function(){return tx},all:function(){return tG},allKeys:function(){return ep},any:function(){return tH},assign:function(){return eN},before:function(){return tE},bind:function(){return tl},bindAll:function(){return tp},chain:function(){return ts},chunk:function(){return ng},clone:function(){return ek},collect:function(){return tC},compact:function(){return ni},compose:function(){return tT},constant:function(){return J},contains:function(){return tZ},countBy:function(){return t4},create:function(){return eP},debounce:function(){return tb},default:function(){return n_},defaults:function(){return eO},defer:function(){return tm},delay:function(){return tg},detect:function(){return tj},difference:function(){return ns},drop:function(){return nn},each:function(){return tk},escape:function(){return e3},every:function(){return tG},extend:function(){return eL},extendOwn:function(){return eN},filter:function(){return tV},find:function(){return tj},findIndex:function(){return tS},findKey:function(){return tw},findLastIndex:function(){return tI},findWhere:function(){return tP},first:function(){return nt},flatten:function(){return na},foldl:function(){return tF},foldr:function(){return tD},forEach:function(){return tk},functions:function(){return eI},get:function(){return eV},groupBy:function(){return t2},has:function(){return eB},head:function(){return nt},identity:function(){return eG},include:function(){return tZ},includes:function(){return tZ},indexBy:function(){return t3},indexOf:function(){return tN},initial:function(){return ne},inject:function(){return tF},intersection:function(){return nl},invert:function(){return eS},invoke:function(){return tz},isArguments:function(){return W},isArray:function(){return z},isArrayBuffer:function(){return C},isBoolean:function(){return S},isDataView:function(){return Z},isDate:function(){return O},isElement:function(){return I},isEmpty:function(){return eo},isEqual:function(){return eh},isError:function(){return P},isFinite:function(){return Y},isFunction:function(){return D},isMap:function(){return eT},isMatch:function(){return eu},isNaN:function(){return X},isNull:function(){return w},isNumber:function(){return N},isObject:function(){return A},isRegExp:function(){return j},isSet:function(){return eE},isString:function(){return L},isSymbol:function(){return k},isTypedArray:function(){return er},isUndefined:function(){return M},isWeakMap:function(){return ex},isWeakSet:function(){return eA},iteratee:function(){return eK},keys:function(){return es},last:function(){return nr},lastIndexOf:function(){return tO},map:function(){return tC},mapObject:function(){return eY},matcher:function(){return eH},matches:function(){return eH},max:function(){return tW},memoize:function(){return td},methods:function(){return eI},min:function(){return tY},mixin:function(){return ny},negate:function(){return t_},noop:function(){return eX},now:function(){return e0},object:function(){return np},omit:function(){return t7},once:function(){return tA},pairs:function(){return eM},partial:function(){return tc},partition:function(){return t5},pick:function(){return t9},pluck:function(){return tq},property:function(){return eZ},propertyOf:function(){return eJ},random:function(){return e$},range:function(){return nd},reduce:function(){return tF},reduceRight:function(){return tD},reject:function(){return tB},rest:function(){return nn},restArguments:function(){return E},result:function(){return tr},sample:function(){return tQ},select:function(){return tV},shuffle:function(){return t$},size:function(){return t6},some:function(){return tH},sortBy:function(){return t0},sortedIndex:function(){return tR},tail:function(){return nn},take:function(){return nt},tap:function(){return eC},template:function(){return tn},templateSettings:function(){return e6},throttle:function(){return ty},times:function(){return eQ},toArray:function(){return tJ},toPath:function(){return eU},transpose:function(){return nf},unescape:function(){return e5},union:function(){return nc},uniq:function(){return nu},unique:function(){return nu},uniqueId:function(){return ta},unzip:function(){return nf},values:function(){return ew},where:function(){return tK},without:function(){return no},wrap:function(){return tv},zip:function(){return nh}});var r={};n.r(r),n.d(r,{VERSION:function(){return i},after:function(){return tx},all:function(){return tG},allKeys:function(){return ep},any:function(){return tH},assign:function(){return eN},before:function(){return tE},bind:function(){return tl},bindAll:function(){return tp},chain:function(){return ts},chunk:function(){return ng},clone:function(){return ek},collect:function(){return tC},compact:function(){return ni},compose:function(){return tT},constant:function(){return J},contains:function(){return tZ},countBy:function(){return t4},create:function(){return eP},debounce:function(){return tb},default:function(){return nb},defaults:function(){return eO},defer:function(){return tm},delay:function(){return tg},detect:function(){return tj},difference:function(){return ns},drop:function(){return nn},each:function(){return tk},escape:function(){return e3},every:function(){return tG},extend:function(){return eL},extendOwn:function(){return eN},filter:function(){return tV},find:function(){return tj},findIndex:function(){return tS},findKey:function(){return tw},findLastIndex:function(){return tI},findWhere:function(){return tP},first:function(){return nt},flatten:function(){return na},foldl:function(){return tF},foldr:function(){return tD},forEach:function(){return tk},functions:function(){return eI},get:function(){return eV},groupBy:function(){return t2},has:function(){return eB},head:function(){return nt},identity:function(){return eG},include:function(){return tZ},includes:function(){return tZ},indexBy:function(){return t3},indexOf:function(){return tN},initial:function(){return ne},inject:function(){return tF},intersection:function(){return nl},invert:function(){return eS},invoke:function(){return tz},isArguments:function(){return W},isArray:function(){return z},isArrayBuffer:function(){return C},isBoolean:function(){return S},isDataView:function(){return Z},isDate:function(){return O},isElement:function(){return I},isEmpty:function(){return eo},isEqual:function(){return eh},isError:function(){return P},isFinite:function(){return Y},isFunction:function(){return D},isMap:function(){return eT},isMatch:function(){return eu},isNaN:function(){return X},isNull:function(){return w},isNumber:function(){return N},isObject:function(){return A},isRegExp:function(){return j},isSet:function(){return eE},isString:function(){return L},isSymbol:function(){return k},isTypedArray:function(){return er},isUndefined:function(){return M},isWeakMap:function(){return ex},isWeakSet:function(){return eA},iteratee:function(){return eK},keys:function(){return es},last:function(){return nr},lastIndexOf:function(){return tO},map:function(){return tC},mapObject:function(){return eY},matcher:function(){return eH},matches:function(){return eH},max:function(){return tW},memoize:function(){return td},methods:function(){return eI},min:function(){return tY},mixin:function(){return ny},negate:function(){return t_},noop:function(){return eX},now:function(){return e0},object:function(){return np},omit:function(){return t7},once:function(){return tA},pairs:function(){return eM},partial:function(){return tc},partition:function(){return t5},pick:function(){return t9},pluck:function(){return tq},property:function(){return eZ},propertyOf:function(){return eJ},random:function(){return e$},range:function(){return nd},reduce:function(){return tF},reduceRight:function(){return tD},reject:function(){return tB},rest:function(){return nn},restArguments:function(){return E},result:function(){return tr},sample:function(){return tQ},select:function(){return tV},shuffle:function(){return t$},size:function(){return t6},some:function(){return tH},sortBy:function(){return t0},sortedIndex:function(){return tR},tail:function(){return nn},take:function(){return nt},tap:function(){return eC},template:function(){return tn},templateSettings:function(){return e6},throttle:function(){return ty},times:function(){return eQ},toArray:function(){return tJ},toPath:function(){return eU},transpose:function(){return nf},unescape:function(){return e5},union:function(){return nc},uniq:function(){return nu},unique:function(){return nu},uniqueId:function(){return ta},unzip:function(){return nf},values:function(){return ew},where:function(){return tK},without:function(){return no},wrap:function(){return tv},zip:function(){return nh}});var i="1.13.6",a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,o=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,c=s.push,l=s.slice,f=o.toString,h=o.hasOwnProperty,p="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,y=Object.create,b=p&&ArrayBuffer.isView,v=isNaN,_=isFinite,T=!({toString:null}).propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function E(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var a=Array(t+1);for(i=0;i<t;i++)a[i]=arguments[i];return a[t]=r,e.apply(this,a)}}function A(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function w(e){return null===e}function M(e){return void 0===e}function S(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)}function I(e){return!!(e&&1===e.nodeType)}function R(e){var t="[object "+e+"]";return function(e){return f.call(e)===t}}var L=R("String"),N=R("Number"),O=R("Date"),j=R("RegExp"),P=R("Error"),k=R("Symbol"),C=R("ArrayBuffer"),U=R("Function"),F=a.document&&a.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof F&&(U=function(e){return"function"==typeof e});var D=U,V=R("Object"),B=d&&V(new DataView(new ArrayBuffer(8))),G="undefined"!=typeof Map&&V(new Map),H=R("DataView"),Z=B?function(e){return null!=e&&D(e.getInt8)&&C(e.buffer)}:H,z=g||R("Array");function q(e,t){return null!=e&&h.call(e,t)}var K=R("Arguments");!function(){K(arguments)||(K=function(e){return q(e,"callee")})}();var W=K;function Y(e){return!k(e)&&_(e)&&!isNaN(parseFloat(e))}function X(e){return N(e)&&v(e)}function J(e){return function(){return e}}function Q(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=9007199254740991}}function $(e){return function(t){return null==t?void 0:t[e]}}var ee=$("byteLength"),et=Q(ee),en=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,er=p?function(e){return b?b(e)&&!Z(e):et(e)&&en.test(f.call(e))}:J(!1),ei=$("length");function ea(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=x.length,r=e.constructor,i=D(r)&&r.prototype||o,a="constructor";for(q(e,a)&&!t.contains(a)&&t.push(a);n--;)(a=x[n])in e&&e[a]!==i[a]&&!t.contains(a)&&t.push(a)}function es(e){if(!A(e))return[];if(m)return m(e);var t=[];for(var n in e)q(e,n)&&t.push(n);return T&&ea(e,t),t}function eo(e){if(null==e)return!0;var t=ei(e);return"number"==typeof t&&(z(e)||L(e)||W(e))?0===t:0===ei(es(e))}function eu(e,t){var n=es(t),r=n.length;if(null==e)return!r;for(var i=Object(e),a=0;a<r;a++){var s=n[a];if(t[s]!==i[s]||!(s in i))return!1}return!0}function ec(e){return e instanceof ec?e:this instanceof ec?void(this._wrapped=e):new ec(e)}function el(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,ee(e))}ec.VERSION=i,ec.prototype.value=function(){return this._wrapped},ec.prototype.valueOf=ec.prototype.toJSON=ec.prototype.value,ec.prototype.toString=function(){return String(this._wrapped)};var ef="[object DataView]";function eh(e,t){return function e(t,n,r,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var a=typeof t;return("function"===a||"object"===a||"object"==typeof n)&&function t(n,r,i,a){n instanceof ec&&(n=n._wrapped),r instanceof ec&&(r=r._wrapped);var s=f.call(n);if(s!==f.call(r))return!1;if(B&&"[object Object]"==s&&Z(n)){if(!Z(r))return!1;s=ef}switch(s){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":if(+n!=+n)return+r!=+r;return 0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return u.valueOf.call(n)===u.valueOf.call(r);case"[object ArrayBuffer]":case ef:return t(el(n),el(r),i,a)}var o="[object Array]"===s;if(!o&&er(n)){if(ee(n)!==ee(r))return!1;if(n.buffer===r.buffer&&n.byteOffset===r.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof n||"object"!=typeof r)return!1;var c=n.constructor,l=r.constructor;if(c!==l&&!(D(c)&&c instanceof c&&D(l)&&l instanceof l)&&"constructor"in n&&"constructor"in r)return!1}a=a||[];for(var h=(i=i||[]).length;h--;)if(i[h]===n)return a[h]===r;if(i.push(n),a.push(r),o){if((h=n.length)!==r.length)return!1;for(;h--;)if(!e(n[h],r[h],i,a))return!1}else{var p,d=es(n);if(h=d.length,es(r).length!==h)return!1;for(;h--;)if(!(q(r,p=d[h])&&e(n[p],r[p],i,a)))return!1}return i.pop(),a.pop(),!0}(t,n,r,i)}(e,t)}function ep(e){if(!A(e))return[];var t=[];for(var n in e)t.push(n);return T&&ea(e,t),t}function ed(e){var t=ei(e);return function(n){if(null==n)return!1;var r=ep(n);if(ei(r))return!1;for(var i=0;i<t;i++)if(!D(n[e[i]]))return!1;return e!==ev||!D(n[eg])}}var eg="forEach",em=["clear","delete"],ey=["get","has","set"],eb=em.concat(eg,ey),ev=em.concat(ey),e_=["add"].concat(em,eg,"has"),eT=G?ed(eb):R("Map"),ex=G?ed(ev):R("WeakMap"),eE=G?ed(e_):R("Set"),eA=R("WeakSet");function ew(e){for(var t=es(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function eM(e){for(var t=es(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function eS(e){for(var t={},n=es(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function eI(e){var t=[];for(var n in e)D(e[n])&&t.push(n);return t.sort()}function eR(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var a=arguments[i],s=e(a),o=s.length,u=0;u<o;u++){var c=s[u];t&&void 0!==n[c]||(n[c]=a[c])}return n}}var eL=eR(ep),eN=eR(es),eO=eR(ep,!0);function ej(e){if(!A(e))return{};if(y)return y(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function eP(e,t){var n=ej(e);return t&&eN(n,t),n}function ek(e){return A(e)?z(e)?e.slice():eL({},e):e}function eC(e,t){return t(e),e}function eU(e){return z(e)?e:[e]}function eF(e){return ec.toPath(e)}function eD(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function eV(e,t,n){var r=eD(e,eF(t));return M(r)?n:r}function eB(e,t){for(var n=(t=eF(t)).length,r=0;r<n;r++){var i=t[r];if(!q(e,i))return!1;e=e[i]}return!!n}function eG(e){return e}function eH(e){return e=eN({},e),function(t){return eu(t,e)}}function eZ(e){return e=eF(e),function(t){return eD(t,e)}}function ez(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}}function eq(e,t,n){return null==e?eG:D(e)?ez(e,t,n):A(e)&&!z(e)?eH(e):eZ(e)}function eK(e,t){return eq(e,t,1/0)}function eW(e,t,n){return ec.iteratee!==eK?ec.iteratee(e,t):eq(e,t,n)}function eY(e,t,n){t=eW(t,n);for(var r=es(e),i=r.length,a={},s=0;s<i;s++){var o=r[s];a[o]=t(e[o],o,e)}return a}function eX(){}function eJ(e){return null==e?eX:function(t){return eV(e,t)}}function eQ(e,t,n){var r=Array(Math.max(0,e));t=ez(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function e$(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ec.toPath=eU,ec.iteratee=eK;var e0=Date.now||function(){return new Date().getTime()};function e1(e){var t=function(t){return e[t]},n="(?:"+es(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}}var e2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e3=e1(e2),e4=eS(e2),e5=e1(e4),e6=ec.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},e8=/(.)^/,e9={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},e7=/\\|'|\r|\n|\u2028|\u2029/g;function te(e){return"\\"+e9[e]}var tt=/^\s*(\w|\$)+\s*$/;function tn(e,t,n){!t&&n&&(t=n),t=eO({},t,ec.templateSettings);var r,i=RegExp([(t.escape||e8).source,(t.interpolate||e8).source,(t.evaluate||e8).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(i,function(t,n,r,i,o){return s+=e.slice(a,o).replace(e7,te),a=o+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t}),s+="';\n";var o=t.variable;if(o){if(!tt.test(o))throw Error("variable is not a bare identifier: "+o)}else s="with(obj||{}){\n"+s+"}\n",o="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=Function(o,"_",s)}catch(u){throw u.source=s,u}var c=function(e){return r.call(this,e,ec)};return c.source="function("+o+"){\n"+s+"}",c}function tr(e,t,n){var r=(t=eF(t)).length;if(!r)return D(n)?n.call(e):n;for(var i=0;i<r;i++){var a=null==e?void 0:e[t[i]];void 0===a&&(a=n,i=r),e=D(a)?a.call(e):a}return e}var ti=0;function ta(e){var t=++ti+"";return e?e+t:t}function ts(e){var t=ec(e);return t._chain=!0,t}function to(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=ej(e.prototype),s=e.apply(a,i);return A(s)?s:a}var tu=E(function(e,t){var n=tu.placeholder,r=function(){for(var i=0,a=t.length,s=Array(a),o=0;o<a;o++)s[o]=t[o]===n?arguments[i++]:t[o];for(;i<arguments.length;)s.push(arguments[i++]);return to(e,r,this,this,s)};return r});tu.placeholder=ec;var tc=tu,tl=E(function(e,t,n){if(!D(e))throw TypeError("Bind must be called on a function");var r=E(function(i){return to(e,r,t,this,n.concat(i))});return r}),tf=Q(ei);function th(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,a=0,s=ei(e);a<s;a++){var o=e[a];if(tf(o)&&(z(o)||W(o))){if(t>1)th(o,t-1,n,r),i=r.length;else for(var u=0,c=o.length;u<c;)r[i++]=o[u++]}else n||(r[i++]=o)}return r}var tp=E(function(e,t){var n=(t=th(t,!1,!1)).length;if(n<1)throw Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=tl(e[r],e)}return e});function td(e,t){var n=function(r){var i=n.cache,a=""+(t?t.apply(this,arguments):r);return q(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n}var tg=E(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),tm=tc(tg,ec,1);function ty(e,t,n){var r,i,a,s,o=0;n||(n={});var u=function(){o=!1===n.leading?0:e0(),r=null,s=e.apply(i,a),r||(i=a=null)},c=function(){var c=e0();o||!1!==n.leading||(o=c);var l=t-(c-o);return i=this,a=arguments,l<=0||l>t?(r&&(clearTimeout(r),r=null),o=c,s=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,l)),s};return c.cancel=function(){clearTimeout(r),o=0,r=i=a=null},c}function tb(e,t,n){var r,i,a,s,o,u=function(){var c=e0()-i;t>c?r=setTimeout(u,t-c):(r=null,n||(s=e.apply(o,a)),r||(a=o=null))},c=E(function(c){return o=this,a=c,i=e0(),!r&&(r=setTimeout(u,t),n&&(s=e.apply(o,a))),s});return c.cancel=function(){clearTimeout(r),r=a=o=null},c}function tv(e,t){return tc(t,e)}function t_(e){return function(){return!e.apply(this,arguments)}}function tT(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function tx(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function tE(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var tA=tc(tE,2);function tw(e,t,n){t=eW(t,n);for(var r,i=es(e),a=0,s=i.length;a<s;a++)if(t(e[r=i[a]],r,e))return r}function tM(e){return function(t,n,r){n=eW(n,r);for(var i=ei(t),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(n(t[a],a,t))return a;return -1}}var tS=tM(1),tI=tM(-1);function tR(e,t,n,r){for(var i=(n=eW(n,r,1))(t),a=0,s=ei(e);a<s;){var o=Math.floor((a+s)/2);n(e[o])<i?a=o+1:s=o}return a}function tL(e,t,n){return function(r,i,a){var s=0,o=ei(r);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+o,s):o=a>=0?Math.min(a+1,o):a+o+1;else if(n&&a&&o)return r[a=n(r,i)]===i?a:-1;if(i!=i)return(a=t(l.call(r,s,o),X))>=0?a+s:-1;for(a=e>0?s:o-1;a>=0&&a<o;a+=e)if(r[a]===i)return a;return -1}}var tN=tL(1,tS,tR),tO=tL(-1,tI);function tj(e,t,n){var r=(tf(e)?tS:tw)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function tP(e,t){return tj(e,eH(t))}function tk(e,t,n){if(t=ez(t,n),tf(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var r,i,a=es(e);for(r=0,i=a.length;r<i;r++)t(e[a[r]],a[r],e)}return e}function tC(e,t,n){t=eW(t,n);for(var r=!tf(e)&&es(e),i=(r||e).length,a=Array(i),s=0;s<i;s++){var o=r?r[s]:s;a[s]=t(e[o],o,e)}return a}function tU(e){var t=function(t,n,r,i){var a=!tf(t)&&es(t),s=(a||t).length,o=e>0?0:s-1;for(i||(r=t[a?a[o]:o],o+=e);o>=0&&o<s;o+=e){var u=a?a[o]:o;r=n(r,t[u],u,t)}return r};return function(e,n,r,i){var a=arguments.length>=3;return t(e,ez(n,i,4),r,a)}}var tF=tU(1),tD=tU(-1);function tV(e,t,n){var r=[];return t=eW(t,n),tk(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function tB(e,t,n){return tV(e,t_(eW(t)),n)}function tG(e,t,n){t=eW(t,n);for(var r=!tf(e)&&es(e),i=(r||e).length,a=0;a<i;a++){var s=r?r[a]:a;if(!t(e[s],s,e))return!1}return!0}function tH(e,t,n){t=eW(t,n);for(var r=!tf(e)&&es(e),i=(r||e).length,a=0;a<i;a++){var s=r?r[a]:a;if(t(e[s],s,e))return!0}return!1}function tZ(e,t,n,r){return tf(e)||(e=ew(e)),("number"!=typeof n||r)&&(n=0),tN(e,t,n)>=0}var tz=E(function(e,t,n){var r,i;return D(t)?i=t:(r=(t=eF(t)).slice(0,-1),t=t[t.length-1]),tC(e,function(e){var a=i;if(!a){if(r&&r.length&&(e=eD(e,r)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)})});function tq(e,t){return tC(e,eZ(t))}function tK(e,t){return tV(e,eH(t))}function tW(e,t,n){var r,i,a=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=tf(e)?e:ew(e);for(var o=0,u=e.length;o<u;o++)null!=(r=e[o])&&r>a&&(a=r)}else t=eW(t,n),tk(e,function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&a===-1/0)&&(a=e,s=i)});return a}function tY(e,t,n){var r,i,a=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=tf(e)?e:ew(e);for(var o=0,u=e.length;o<u;o++)null!=(r=e[o])&&r<a&&(a=r)}else t=eW(t,n),tk(e,function(e,n,r){((i=t(e,n,r))<s||i===1/0&&a===1/0)&&(a=e,s=i)});return a}var tX=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function tJ(e){return e?z(e)?l.call(e):L(e)?e.match(tX):tf(e)?tC(e,eG):ew(e):[]}function tQ(e,t,n){if(null==t||n)return tf(e)||(e=ew(e)),e[e$(e.length-1)];var r=tJ(e),i=ei(r);t=Math.max(Math.min(t,i),0);for(var a=i-1,s=0;s<t;s++){var o=e$(s,a),u=r[s];r[s]=r[o],r[o]=u}return r.slice(0,t)}function t$(e){return tQ(e,1/0)}function t0(e,t,n){var r=0;return t=eW(t,n),tq(tC(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return -1}return e.index-t.index}),"value")}function t1(e,t){return function(n,r,i){var a=t?[[],[]]:{};return r=eW(r,i),tk(n,function(t,i){var s=r(t,i,n);e(a,t,s)}),a}}var t2=t1(function(e,t,n){q(e,n)?e[n].push(t):e[n]=[t]}),t3=t1(function(e,t,n){e[n]=t}),t4=t1(function(e,t,n){q(e,n)?e[n]++:e[n]=1}),t5=t1(function(e,t,n){e[n?0:1].push(t)},!0);function t6(e){return null==e?0:tf(e)?e.length:es(e).length}function t8(e,t,n){return t in n}var t9=E(function(e,t){var n={},r=t[0];if(null==e)return n;D(r)?(t.length>1&&(r=ez(r,t[1])),t=ep(e)):(r=t8,t=th(t,!1,!1),e=Object(e));for(var i=0,a=t.length;i<a;i++){var s=t[i],o=e[s];r(o,s,e)&&(n[s]=o)}return n}),t7=E(function(e,t){var n,r=t[0];return D(r)?(r=t_(r),t.length>1&&(n=t[1])):(t=tC(th(t,!1,!1),String),r=function(e,n){return!tZ(t,n)}),t9(e,r,n)});function ne(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function nt(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:ne(e,e.length-t)}function nn(e,t,n){return l.call(e,null==t||n?1:t)}function nr(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:nn(e,Math.max(0,e.length-t))}function ni(e){return tV(e,Boolean)}function na(e,t){return th(e,t,!1)}var ns=E(function(e,t){return t=th(t,!0,!0),tV(e,function(e){return!tZ(t,e)})}),no=E(function(e,t){return ns(e,t)});function nu(e,t,n,r){S(t)||(r=n,n=t,t=!1),null!=n&&(n=eW(n,r));for(var i=[],a=[],s=0,o=ei(e);s<o;s++){var u=e[s],c=n?n(u,s,e):u;t&&!n?(s&&a===c||i.push(u),a=c):n?tZ(a,c)||(a.push(c),i.push(u)):tZ(i,u)||i.push(u)}return i}var nc=E(function(e){return nu(th(e,!0,!0))});function nl(e){for(var t=[],n=arguments.length,r=0,i=ei(e);r<i;r++){var a,s=e[r];if(!tZ(t,s)){for(a=1;a<n&&tZ(arguments[a],s);a++);a===n&&t.push(s)}}return t}function nf(e){for(var t=e&&tW(e,ei).length||0,n=Array(t),r=0;r<t;r++)n[r]=tq(e,r);return n}var nh=E(nf);function np(e,t){for(var n={},r=0,i=ei(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function nd(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;a<r;a++,e+=n)i[a]=e;return i}function ng(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(l.call(e,r,r+=t));return n}function nm(e,t){return e._chain?ec(t).chain():t}function ny(e){return tk(eI(e),function(t){var n=ec[t]=e[t];ec.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),nm(this,n.apply(ec,e))}}),ec}tk(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];ec.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),("shift"===e||"splice"===e)&&0===n.length&&delete n[0]),nm(this,n)}}),tk(["concat","join","slice"],function(e){var t=s[e];ec.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),nm(this,e)}});var nb=ec,nv=ny(r);nv._=nv;var n_=nv}}]);